# Há»† THá»NG QUáº¢N LÃ Sáº¢N XUáº¤T & KÃCH HOáº T MÃƒ QR
**TÃ i liá»‡u hÆ°á»›ng dáº«n sá»­ dá»¥ng**

**PhiÃªn báº£n:** 1.0
**NgÃ y biÃªn soáº¡n:** ThÃ¡ng 11 nÄƒm 2025

---

## GIá»šI THIá»†U

TÃ i liá»‡u nÃ y Ä‘Æ°á»£c biÃªn soáº¡n nháº±m cung cáº¥p Ä‘áº§y Ä‘á»§ thÃ´ng tin giÃºp ngÆ°á»i váº­n hÃ nh sá»­ dá»¥ng há»‡ thá»‘ng quáº£n lÃ½ sáº£n xuáº¥t Ä‘Ãºng cÃ¡ch, Ä‘áº£m báº£o an toÃ n, Ä‘á»“ng thá»i thá»±c hiá»‡n cÃ¡c thao tÃ¡c hiá»‡u quáº£. Viá»‡c tuÃ¢n thá»§ cÃ¡c hÆ°á»›ng dáº«n trong tÃ i liá»‡u sáº½ giÃºp há»‡ thá»‘ng hoáº¡t Ä‘á»™ng á»•n Ä‘á»‹nh, trÃ¡nh sai sÃ³t dá»¯ liá»‡u vÃ  Ä‘áº¡t hiá»‡u suáº¥t tá»‘i Æ°u.

### 1. Táº§m quan trá»ng cá»§a tÃ i liá»‡u

- Cung cáº¥p hÆ°á»›ng dáº«n chi tiáº¿t vá» cÃ¡ch váº­n hÃ nh, quáº£n lÃ½ lÃ´ sáº£n xuáº¥t vÃ  kháº¯c phá»¥c sá»± cá»‘ thÆ°á»ng gáº·p
- GiÃºp ngÆ°á»i váº­n hÃ nh hiá»ƒu rÃµ nguyÃªn lÃ½ hoáº¡t Ä‘á»™ng cá»§a há»‡ thá»‘ng, tá»« Ä‘Ã³ sá»­ dá»¥ng Ä‘Ãºng quy trÃ¬nh
- Háº¡n cháº¿ cÃ¡c lá»—i do váº­n hÃ nh sai, Ä‘áº£m báº£o an toÃ n cho dá»¯ liá»‡u vÃ  thiáº¿t bá»‹
- Tá»‘i Æ°u hÃ³a hiá»‡u suáº¥t há»‡ thá»‘ng, giáº£m thiá»ƒu thá»i gian cháº¿t vÃ  sai sÃ³t

### 2. LÆ°u Ã½ khi sá»­ dá»¥ng tÃ i liá»‡u

- Vui lÃ²ng luÃ´n giá»¯ tÃ i liá»‡u nÃ y bÃªn cáº¡nh thiáº¿t bá»‹ Ä‘á»ƒ cÃ³ thá»ƒ tham kháº£o khi cáº§n thiáº¿t
- Äá»c ká»¹ tÃ i liá»‡u trÆ°á»›c khi váº­n hÃ nh Ä‘á»ƒ trÃ¡nh nhá»¯ng sá»± cá»‘ khÃ´ng mong muá»‘n
- Náº¿u phÃ¡t hiá»‡n sai sÃ³t hoáº·c cáº§n bá»• sung thÃªm thÃ´ng tin, vui lÃ²ng liÃªn há»‡ vá»›i bá»™ pháº­n IT/ká»¹ thuáº­t

### 3. Há»— trá»£ ká»¹ thuáº­t

Náº¿u cÃ³ báº¥t ká»³ tháº¯c máº¯c hoáº·c cáº§n há»— trá»£ trong quÃ¡ trÃ¬nh sá»­ dá»¥ng, vui lÃ²ng liÃªn há»‡ vá»›i bá»™ pháº­n IT hoáº·c quáº£n lÃ½ dá»± Ã¡n.

---

## Má»¤C Lá»¤C

- [GIá»šI THIá»†U](#giá»›i-thiá»‡u)
- [PHáº¦N 1: HÆ¯á»šNG DáºªN AN TOÃ€N](#pháº§n-1-hÆ°á»›ng-dáº«n-an-toÃ n)
  - [1.1. Äá»‘i vá»›i ngÆ°á»i váº­n hÃ nh](#11-Ä‘á»‘i-vá»›i-ngÆ°á»i-váº­n-hÃ nh)
  - [1.2. Äá»‘i vá»›i quáº£n lÃ½/ká»¹ thuáº­t viÃªn](#12-Ä‘á»‘i-vá»›i-quáº£n-lÃ½ká»¹-thuáº­t-viÃªn)
  - [1.3. Äá»‘i vá»›i mÃ´i trÆ°á»ng lÃ m viá»‡c](#13-Ä‘á»‘i-vá»›i-mÃ´i-trÆ°á»ng-lÃ m-viá»‡c)
  - [1.4. Quy trÃ¬nh á»©ng phÃ³ sá»± cá»‘](#14-quy-trÃ¬nh-á»©ng-phÃ³-sá»±-cá»‘)
- [PHáº¦N 2: THIáº¾T Bá»Š VÃ€ GIAO DIá»†N](#pháº§n-2-thiáº¿t-bá»‹-vÃ -giao-diá»‡n)
  - [2.1. Thiáº¿t bá»‹ pháº§n cá»©ng](#21-thiáº¿t-bá»‹-pháº§n-cá»©ng)
  - [2.2. Giá»›i thiá»‡u giao diá»‡n pháº§n má»m](#22-giá»›i-thiá»‡u-giao-diá»‡n-pháº§n-má»m)
  - [2.3. CÃ¡ch há»‡ thá»‘ng hoáº¡t Ä‘á»™ng](#23-cÃ¡ch-há»‡-thá»‘ng-hoáº¡t-Ä‘á»™ng)
- [PHáº¦N 3: QUY TRÃŒNH Váº¬N HÃ€NH](#pháº§n-3-quy-trÃ¬nh-váº­n-hÃ nh)
  - [3.1. Quy trÃ¬nh khá»Ÿi Ä‘á»™ng há»‡ thá»‘ng](#31-quy-trÃ¬nh-khá»Ÿi-Ä‘á»™ng-há»‡-thá»‘ng)
  - [3.2. Quy trÃ¬nh Ä‘Äƒng nháº­p](#32-quy-trÃ¬nh-Ä‘Äƒng-nháº­p)
  - [3.3. Quy trÃ¬nh báº¯t Ä‘áº§u sáº£n xuáº¥t, Ä‘á»•i lÃ´](#33-quy-trÃ¬nh-báº¯t-Ä‘áº§u-sáº£n-xuáº¥t-Ä‘á»•i-lÃ´)
  - [3.4. Quy trÃ¬nh quÃ©t vÃ  tra cá»©u mÃ£ QR](#34-quy-trÃ¬nh-quÃ©t-vÃ -tra-cá»©u-mÃ£-qr)
  - [3.5. Quy trÃ¬nh thÃªm mÃ£ thá»§ cÃ´ng](#35-quy-trÃ¬nh-thÃªm-mÃ£-thá»§-cÃ´ng)
  - [3.6. Quy trÃ¬nh xÃ³a lá»—i vÃ  reset counter](#36-quy-trÃ¬nh-xÃ³a-lá»—i-vÃ -reset-counter)
- [PHáº¦N 4: Cáº¤U HÃŒNH Há»† THá»NG](#pháº§n-4-cáº¥u-hÃ¬nh-há»‡-thá»‘ng)
  - [4.1. Cáº¥u hÃ¬nh á»©ng dá»¥ng](#41-cáº¥u-hÃ¬nh-á»©ng-dá»¥ng)
  - [4.2. Cáº¥u hÃ¬nh PLC](#42-cáº¥u-hÃ¬nh-plc)
  - [4.3. Quáº£n lÃ½ ngÆ°á»i dÃ¹ng (Admin)](#43-quáº£n-lÃ½-ngÆ°á»i-dÃ¹ng-admin)
    - [4.3.1. Táº¡o ngÆ°á»i dÃ¹ng má»›i](#431-táº¡o-ngÆ°á»i-dÃ¹ng-má»›i)
    - [4.3.2. Sá»­a thÃ´ng tin ngÆ°á»i dÃ¹ng](#432-sá»­a-thÃ´ng-tin-ngÆ°á»i-dÃ¹ng)
    - [4.3.3. XÃ³a ngÆ°á»i dÃ¹ng](#433-xÃ³a-ngÆ°á»i-dÃ¹ng)
    - [4.3.4. Reset máº­t kháº©u ngÆ°á»i dÃ¹ng](#434-reset-máº­t-kháº©u-ngÆ°á»i-dÃ¹ng)
  - [4.4. Äá»•i máº­t kháº©u](#44-Ä‘á»•i-máº­t-kháº©u)
  - [4.5. Xem nháº­t kÃ½ hoáº¡t Ä‘á»™ng](#45-xem-nháº­t-kÃ½-hoáº¡t-Ä‘á»™ng)
- [PHáº¦N 5: Xá»¬ LÃ Sá»° Cá» THÆ¯á»œNG Gáº¶P](#pháº§n-5-xá»­-lÃ½-sá»±-cá»‘-thÆ°á»ng-gáº·p)

---

# PHáº¦N 1: HÆ¯á»šNG DáºªN AN TOÃ€N

An toÃ n lÃ  yáº¿u tá»‘ quan trá»ng hÃ ng Ä‘áº§u trong quÃ¡ trÃ¬nh váº­n hÃ nh vÃ  báº£o trÃ¬ há»‡ thá»‘ng. NgÆ°á»i váº­n hÃ nh vÃ  ká»¹ thuáº­t viÃªn cáº§n tuyá»‡t Ä‘á»‘i tuÃ¢n thá»§ cÃ¡c nguyÃªn táº¯c an toÃ n dÆ°á»›i Ä‘Ã¢y Ä‘á»ƒ trÃ¡nh cÃ¡c rá»§i ro vá» dá»¯ liá»‡u, thiáº¿t bá»‹ vÃ  quy trÃ¬nh sáº£n xuáº¥t.

## 1.1. Äá»‘i vá»›i ngÆ°á»i váº­n hÃ nh

NgÆ°á»i váº­n hÃ nh cáº§n tuÃ¢n thá»§ cÃ¡c quy táº¯c sau Ä‘á»ƒ Ä‘áº£m báº£o an toÃ n:

### Quy táº¯c chung

- **KhÃ´ng tá»± Ã½ táº¯t á»©ng dá»¥ng** khi Ä‘ang trong quÃ¡ trÃ¬nh sáº£n xuáº¥t
- **KhÃ´ng tá»± Ã½ thay Ä‘á»•i cáº¥u hÃ¬nh há»‡ thá»‘ng** náº¿u khÃ´ng cÃ³ quyá»n Admin
- **Tuyá»‡t Ä‘á»‘i khÃ´ng táº¯t mÃ¡y tÃ­nh** khi há»‡ thá»‘ng Ä‘ang váº­n hÃ nh
- **LuÃ´n kiá»ƒm tra tráº¡ng thÃ¡i thiáº¿t bá»‹** trÆ°á»›c khi báº¯t Ä‘áº§u ca lÃ m viá»‡c
- **Äáº£m báº£o cÃ¡c thiáº¿t bá»‹ ngoáº¡i vi** (PLC, Camera, Scanner) Ä‘Æ°á»£c káº¿t ná»‘i á»•n Ä‘á»‹nh
- **KhÃ´ng can thiá»‡p vÃ o pháº§n cá»©ng** (thÃ¡o dÃ¢y, di chuyá»ƒn thiáº¿t bá»‹) khi há»‡ thá»‘ng Ä‘ang cháº¡y

### Thao tÃ¡c vá»›i dá»¯ liá»‡u

- **Kiá»ƒm tra ká»¹ thÃ´ng tin lÃ´ sáº£n xuáº¥t** trÆ°á»›c khi xÃ¡c nháº­n Ä‘á»•i lÃ´
- **KhÃ´ng thÃªm mÃ£ QR sai Ä‘á»‹nh dáº¡ng** vÃ o há»‡ thá»‘ng
- **BÃ¡o cÃ¡o ngay** khi phÃ¡t hiá»‡n lá»—i dá»¯ liá»‡u hoáº·c mÃ£ trÃ¹ng láº·p báº¥t thÆ°á»ng
- **KhÃ´ng xÃ³a counter** khi chÆ°a cÃ³ sá»± Ä‘á»“ng Ã½ cá»§a quáº£n lÃ½

### Sá»­ dá»¥ng thiáº¿t bá»‹ báº£o há»™

- Äeo gÄƒng tay chá»‘ng tÄ©nh Ä‘iá»‡n khi cáº§n tiáº¿p xÃºc vá»›i thiáº¿t bá»‹ Ä‘iá»‡n tá»­
- KhÃ´ng sá»­ dá»¥ng thiáº¿t bá»‹ trong mÃ´i trÆ°á»ng áº©m Æ°á»›t
- Giá»¯ khu vá»±c lÃ m viá»‡c gá»n gÃ ng, trÃ¡nh Ä‘á»• nÆ°á»›c lÃªn thiáº¿t bá»‹

## 1.2. Äá»‘i vá»›i quáº£n lÃ½/ká»¹ thuáº­t viÃªn

Quáº£n lÃ½ vÃ  ká»¹ thuáº­t viÃªn cÃ³ trÃ¡ch nhiá»‡m cáº¥u hÃ¬nh, báº£o trÃ¬ há»‡ thá»‘ng vÃ  cáº§n tuÃ¢n thá»§ cÃ¡c nguyÃªn táº¯c sau:

- **Náº¯m rÃµ cáº¥u trÃºc há»‡ thá»‘ng** trÆ°á»›c khi thao tÃ¡c hoáº·c cáº¥u hÃ¬nh
- **KhÃ´ng tá»± Ã½ thay Ä‘á»•i cáº¥u hÃ¬nh PLC** mÃ  khÃ´ng cÃ³ sá»± phÃª duyá»‡t
- **Backup dá»¯ liá»‡u Ä‘á»‹nh ká»³** (xem Pháº§n 5) Ä‘á»ƒ phÃ²ng trÆ°á»ng há»£p máº¥t dá»¯ liá»‡u
- **Kiá»ƒm tra log thÆ°á»ng xuyÃªn** Ä‘á»ƒ phÃ¡t hiá»‡n sá»›m cÃ¡c dáº¥u hiá»‡u báº¥t thÆ°á»ng
- **Äáº£m báº£o há»‡ thá»‘ng máº¡ng** káº¿t ná»‘i á»•n Ä‘á»‹nh vá»›i PLC vÃ  Camera
- **Ghi chÃ©p láº¡i quÃ¡ trÃ¬nh báº£o trÃ¬** Ä‘á»ƒ thuáº­n tiá»‡n cho viá»‡c theo dÃµi

## 1.3. Äá»‘i vá»›i mÃ´i trÆ°á»ng lÃ m viá»‡c

- Äáº£m báº£o khu vá»±c lÃ m viá»‡c gá»n gÃ ng, sáº¡ch sáº½ Ä‘á»ƒ trÃ¡nh nguy cÆ¡ váº¥p ngÃ£ hoáº·c hÆ° há»ng thiáº¿t bá»‹
- KhÃ´ng Ä‘áº·t cháº¥t lá»ng gáº§n mÃ¡y tÃ­nh hoáº·c thiáº¿t bá»‹ Ä‘iá»‡n
- Äáº£m báº£o há»‡ thá»‘ng thÃ´ng giÃ³ hoáº¡t Ä‘á»™ng tá»‘t Ä‘á»ƒ trÃ¡nh tÃ¬nh tráº¡ng quÃ¡ nhiá»‡t cho thiáº¿t bá»‹
- KhÃ´ng Ä‘á»ƒ cÃ¡c váº­t dá»¥ng kim loáº¡i hoáº·c dá»… chÃ¡y gáº§n khu vá»±c thiáº¿t bá»‹

## 1.4. Quy trÃ¬nh á»©ng phÃ³ sá»± cá»‘

### Trong trÆ°á»ng há»£p máº¥t Ä‘iá»‡n

- Há»‡ thá»‘ng sáº½ tá»± Ä‘á»™ng táº¯t
- Dá»¯ liá»‡u trong queue chÆ°a Ä‘Æ°á»£c ghi vÃ o database cÃ³ thá»ƒ bá»‹ máº¥t
- Sau khi cÃ³ Ä‘iá»‡n trá»Ÿ láº¡i, khá»Ÿi Ä‘á»™ng láº¡i há»‡ thá»‘ng theo quy trÃ¬nh chuáº©n
- Kiá»ƒm tra láº¡i dá»¯ liá»‡u sáº£n xuáº¥t cuá»‘i cÃ¹ng

### Trong trÆ°á»ng há»£p há»‡ thá»‘ng bá»‹ treo

- Äá»£i 30 giÃ¢y Ä‘á»ƒ xem há»‡ thá»‘ng cÃ³ tá»± phá»¥c há»“i khÃ´ng
- Náº¿u khÃ´ng, liÃªn há»‡ ngay vá»›i ká»¹ thuáº­t viÃªn
- Tuyá»‡t Ä‘á»‘i khÃ´ng force shutdown (giá»¯ nÃºt nguá»“n)
- Sá»­ dá»¥ng Task Manager Ä‘á»ƒ force close náº¿u cáº§n thiáº¿t

### Trong trÆ°á»ng há»£p PLC/Camera máº¥t káº¿t ná»‘i

- Kiá»ƒm tra Ä‘Ã¨n bÃ¡o tráº¡ng thÃ¡i trÃªn dashboard
- Äá»£i há»‡ thá»‘ng tá»± káº¿t ná»‘i láº¡i (30 giÃ¢y)
- Náº¿u khÃ´ng káº¿t ná»‘i Ä‘Æ°á»£c, kiá»ƒm tra dÃ¢y máº¡ng
- BÃ¡o cÃ¡o cho ká»¹ thuáº­t viÃªn náº¿u váº«n khÃ´ng Ä‘Æ°á»£c

---

# PHáº¦N 2: THIáº¾T Bá»Š VÃ€ GIAO DIá»†N

## 2.1. Thiáº¿t bá»‹ pháº§n cá»©ng

Há»‡ thá»‘ng bao gá»“m cÃ¡c thiáº¿t bá»‹ pháº§n cá»©ng sau:

### 2.1.1. MÃ¡y tÃ­nh Ä‘iá»u khiá»ƒn

**Chá»©c nÄƒng:**
- Cháº¡y pháº§n má»m quáº£n lÃ½ sáº£n xuáº¥t
- Káº¿t ná»‘i vÃ  giao tiáº¿p vá»›i PLC, Camera, Scanner
- LÆ°u trá»¯ database sáº£n xuáº¥t
- Hiá»ƒn thá»‹ giao diá»‡n HMI cho ngÆ°á»i váº­n hÃ nh

**YÃªu cáº§u cáº¥u hÃ¬nh:**
- Há»‡ Ä‘iá»u hÃ nh: Windows 10/11 (64-bit)
- CPU: Intel Core i5 hoáº·c tÆ°Æ¡ng Ä‘Æ°Æ¡ng
- RAM: Tá»‘i thiá»ƒu 4GB
- á»” cá»©ng: Tá»‘i thiá»ƒu 100GB trá»‘ng
- Card máº¡ng: Ethernet RJ45

> **[ChÃ¨n hÃ¬nh: HÃ¬nh áº£nh mÃ¡y tÃ­nh Ä‘iá»u khiá»ƒn]**

### 2.1.2. PLC Omron

**Chá»©c nÄƒng:**
- Äiá»u khiá»ƒn dÃ¢y chuyá»n sáº£n xuáº¥t
- Äáº¿m sá»‘ lÆ°á»£ng sáº£n pháº©m (tá»•ng, pass, fail)
- Nháº­n tÃ­n hiá»‡u káº¿t quáº£ tá»« pháº§n má»m (QR OK/NG)
- Gá»­i tÃ­n hiá»‡u Ä‘iá»u khiá»ƒn thiáº¿t bá»‹

**ThÃ´ng sá»‘ káº¿t ná»‘i:**
- IP Address: 192.168.250.1
- Port: 9600
- Protocol: TCP/IP (HSL Communication)
- Refresh Rate: 1000ms (1 giÃ¢y)

> **[ChÃ¨n hÃ¬nh: HÃ¬nh áº£nh PLC Omron]**

### 2.1.3. Camera Datalogic

**Chá»©c nÄƒng:**
- QuÃ©t mÃ£ QR trÃªn sáº£n pháº©m
- Gá»­i dá»¯ liá»‡u QR vá» pháº§n má»m qua TCP/IP
- Tá»‘c Ä‘á»™ quÃ©t cao (realtime)

**ThÃ´ng sá»‘ káº¿t ná»‘i:**
- IP Address: 127.0.0.1 (hoáº·c IP cá»¥ thá»ƒ)
- Port: 51236
- Protocol: TCP/IP

> **[ChÃ¨n hÃ¬nh: HÃ¬nh áº£nh Camera Datalogic]**

### 2.1.4. MÃ¡y quÃ©t cáº§m tay (Handheld Scanner)

**Chá»©c nÄƒng:**
- QuÃ©t mÃ£ QR thá»§ cÃ´ng khi cáº§n tra cá»©u
- ThÃªm mÃ£ vÃ o há»‡ thá»‘ng khi cáº§n

**ThÃ´ng sá»‘ káº¿t ná»‘i:**
- Káº¿t ná»‘i: Serial COM port
- COM Port: COM3 (máº·c Ä‘á»‹nh)
- Baud Rate: 9600

> **[ChÃ¨n hÃ¬nh: HÃ¬nh áº£nh mÃ¡y quÃ©t cáº§m tay]**

---

## 2.2. Giá»›i thiá»‡u giao diá»‡n pháº§n má»m

### 2.2.1. MÃ n hÃ¬nh chÃ­nh (Main Form)

MÃ n hÃ¬nh chÃ­nh lÃ  giao diá»‡n Ä‘iá»u hÆ°á»›ng chÃ­nh cá»§a á»©ng dá»¥ng, bao gá»“m:

**ThÃ nh pháº§n:**

1. **Header Bar** (thanh trÃªn cÃ¹ng)
   - Logo á»©ng dá»¥ng
   - TÃªn ngÆ°á»i dÃ¹ng + vai trÃ² (Quáº£n LÃ½ hoáº·c Váº­n HÃ nh)
   - Äá»“ng há»“ thá»i gian thá»±c
   - NÃºt ÄÄƒng xuáº¥t / Táº¯t mÃ¡y

2. **Navigation Menu** (thanh bÃªn trÃ¡i)
   - Dashboard (Trang chá»§)
   - App Settings (CÃ i Ä‘áº·t á»©ng dá»¥ng) - *Chá»‰ Admin*
   - Scan (QuÃ©t/Tra cá»©u)
   - Add Code (ThÃªm mÃ£ thá»§ cÃ´ng)
   - PLC Settings (CÃ i Ä‘áº·t PLC) - *Chá»‰ Admin*
   - Activity Logs (Nháº­t kÃ½ hoáº¡t Ä‘á»™ng) - *Chá»‰ Admin*

> **[ChÃ¨n hÃ¬nh: Giao diá»‡n mÃ n hÃ¬nh chÃ­nh vá»›i cÃ¡c menu]**

### 2.2.2. Dashboard (Trang chá»§ sáº£n xuáº¥t)

Dashboard lÃ  mÃ n hÃ¬nh lÃ m viá»‡c chÃ­nh cá»§a ngÆ°á»i váº­n hÃ nh, hiá»ƒn thá»‹ táº¥t cáº£ thÃ´ng tin quan trá»ng vá» sáº£n xuáº¥t.

**CÃ¡c pháº§n chÃ­nh:**

#### Pháº§n 1: ThÃ´ng tin lÃ´ sáº£n xuáº¥t

| ThÃ nh pháº§n | MÃ´ táº£ |
|------------|-------|
| **Sá»‘ LÃ´** | MÃ£ lÃ´ sáº£n xuáº¥t hiá»‡n táº¡i (BatchCode) |
| **Barcode** | MÃ£ váº¡ch sáº£n pháº©m |
| **NÃºt "Äá»•i LÃ´"** | Thay Ä‘á»•i thÃ´ng tin lÃ´ sáº£n xuáº¥t |
| **Tráº¡ng thÃ¡i** | Cháº¿ Ä‘á»™ chá»‰nh sá»­a/XÃ¡c nháº­n |

> **[ChÃ¨n hÃ¬nh: Pháº§n thÃ´ng tin lÃ´ sáº£n xuáº¥t]**

#### Pháº§n 2: Tráº¡ng thÃ¡i thiáº¿t bá»‹

Hiá»ƒn thá»‹ tráº¡ng thÃ¡i káº¿t ná»‘i cá»§a cÃ¡c thiáº¿t bá»‹:

| Thiáº¿t bá»‹ | ÄÃ¨n LED | Ã nghÄ©a |
|----------|---------|---------|
| **PLC** | ğŸŸ¢ Xanh | Káº¿t ná»‘i bÃ¬nh thÆ°á»ng |
| | ğŸ”´ Äá» | Máº¥t káº¿t ná»‘i / Lá»—i |
| **Camera** | ğŸŸ¢ Xanh | Äang hoáº¡t Ä‘á»™ng |
| | ğŸ”´ Äá» | KhÃ´ng káº¿t ná»‘i |
| **á»¨ng dá»¥ng** | ğŸŸ¢ Sáºµn SÃ ng | Äang sáº£n xuáº¥t bÃ¬nh thÆ°á»ng |
| | ğŸ”µ Cáº¥u HÃ¬nh | Äang thay Ä‘á»•i lÃ´ |
| | ğŸ”´ Lá»—i TB | CÃ³ thiáº¿t bá»‹ lá»—i |

> **[ChÃ¨n hÃ¬nh: Pháº§n tráº¡ng thÃ¡i thiáº¿t bá»‹ vá»›i LED mÃ u]**

#### Pháº§n 3: Bá»™ Ä‘áº¿m sáº£n xuáº¥t

**Bá»™ Ä‘áº¿m PLC:**
- **Tá»•ng (Total):** Tá»•ng sá»‘ sáº£n pháº©m Ä‘i qua PLC
- **OK (Pass):** Sá»‘ sáº£n pháº©m QR Ä‘á»c thÃ nh cÃ´ng
- **NG (Fail):** Sá»‘ sáº£n pháº©m lá»—i (bao gá»“m ReadFail + Timeout)

**Bá»™ Ä‘áº¿m Camera:**
- **Tá»•ng:** Tá»•ng sá»‘ QR camera Ä‘á»c Ä‘Æ°á»£c
- **Pass:** Sá»‘ QR há»£p lá»‡
- **Fail:** Sá»‘ QR lá»—i (trÃ¹ng, sai format, timeout)

**Thá»‘ng kÃª sáº£n xuáº¥t:**
- **Sá»‘ mÃ£ Ä‘ang hoáº¡t Ä‘á»™ng:** Sá»‘ lÆ°á»£ng mÃ£ unique trong RAM
- **Sáº£n lÆ°á»£ng/giá»:** Tá»‘c Ä‘á»™ sáº£n xuáº¥t trung bÃ¬nh

> **[ChÃ¨n hÃ¬nh: Pháº§n bá»™ Ä‘áº¿m vá»›i sá»‘ liá»‡u thá»±c táº¿]**

#### Pháº§n 4: CÃ¡c nÃºt Ä‘iá»u khiá»ƒn

| NÃºt | TÃ­nh nÄƒng |
|-----|-----------|
| **XÃ³a Ä‘áº¿m PLC** | Reset bá»™ Ä‘áº¿m trÃªn PLC vá» 0 |
| **XÃ³a lá»—i PLC** | XÃ³a dá»¯ liá»‡u lá»—i trÃªn PLC |
| **QuÃ©t** | Chuyá»ƒn sang trang Scan Ä‘á»ƒ tra cá»©u mÃ£ |

> **[ChÃ¨n hÃ¬nh: CÃ¡c nÃºt Ä‘iá»u khiá»ƒn]**

#### Pháº§n 5: Hiá»ƒn thá»‹ káº¿t quáº£

- **MÃ£ QR cuá»‘i cÃ¹ng:** Hiá»ƒn thá»‹ mÃ£ QR vá»«a Ä‘Æ°á»£c quÃ©t
- **Danh sÃ¡ch 50 mÃ£ gáº§n nháº¥t:** Listbox hiá»ƒn thá»‹ lá»‹ch sá»­ quÃ©t

> **[ChÃ¨n hÃ¬nh: Pháº§n hiá»ƒn thá»‹ káº¿t quáº£ vá»›i listbox]**

---

### 2.2.3. Trang QuÃ©t/Tra cá»©u (Scan)

**Chá»©c nÄƒng:**
- Káº¿t ná»‘i vá»›i mÃ¡y quÃ©t cáº§m tay
- QuÃ©t mÃ£ QR Ä‘á»ƒ tra cá»©u thÃ´ng tin
- Hiá»ƒn thá»‹ káº¿t quáº£ tÃ¬m kiáº¿m tá»« database

**CÃ¡c thÃ nh pháº§n:**
1. NÃºt "Káº¿t ná»‘i Scanner" - Báº­t/táº¯t káº¿t ná»‘i COM port
2. Ã” hiá»ƒn thá»‹ mÃ£ Ä‘Ã£ quÃ©t
3. Káº¿t quáº£ tra cá»©u:
   - QR Content
   - Batch Code
   - Barcode
   - Status (Pass/Fail/Duplicate/...)
   - Timestamp

> **[ChÃ¨n hÃ¬nh: Giao diá»‡n trang Scan]**

---

### 2.2.4. Trang ThÃªm MÃ£ Thá»§ CÃ´ng (Add Code)

**Chá»©c nÄƒng:**
- ThÃªm mÃ£ QR vÃ o há»‡ thá»‘ng má»™t cÃ¡ch thá»§ cÃ´ng
- Kiá»ƒm tra Ä‘á»‹nh dáº¡ng vÃ  trÃ¹ng láº·p
- Hiá»ƒn thá»‹ queue Ä‘ang chá» xá»­ lÃ½

**CÃ¡c thÃ nh pháº§n:**
1. **Ã” nháº­p mÃ£:** TextBox nháº­p mÃ£ QR (Enter Ä‘á»ƒ thÃªm nhanh)
2. **NÃºt "ThÃªm":** ThÃªm mÃ£ vÃ o hÃ ng Ä‘á»£i
3. **Tráº¡ng thÃ¡i:**
   - ğŸŸ¢ Xanh: ThÃªm thÃ nh cÃ´ng
   - ğŸ”´ Äá»: Lá»—i (sai Ä‘á»‹nh dáº¡ng, chÆ°a cÃ³ lÃ´)
   - ğŸŸ¡ Cam: Cáº£nh bÃ¡o (mÃ£ Ä‘Ã£ tá»“n táº¡i)
4. **Báº£ng Queue:** Hiá»ƒn thá»‹ 50 mÃ£ Ä‘ang chá» xá»­ lÃ½
5. **Console:** Log mÃ u theo thá»i gian thá»±c

> **[ChÃ¨n hÃ¬nh: Giao diá»‡n trang Add Code vá»›i cÃ¡c tráº¡ng thÃ¡i]**

**Quy táº¯c Ä‘á»‹nh dáº¡ng mÃ£ QR:**
- Äá»™ dÃ i tá»‘i thiá»ƒu: 16 kÃ½ tá»±
- Pháº£i chá»©a mÃ£ Barcode cá»§a sáº£n pháº©m
- KhÃ´ng Ä‘Æ°á»£c trÃ¹ng vá»›i mÃ£ Ä‘Ã£ cÃ³ trong há»‡ thá»‘ng

---

### 2.2.5. Trang Cáº¥u HÃ¬nh á»¨ng Dá»¥ng (App Settings)

> âš ï¸ **Chá»‰ dÃ nh cho Admin**

**Chá»©c nÄƒng:**
- Cáº¥u hÃ¬nh thÃ´ng sá»‘ káº¿t ná»‘i PLC, Camera, Scanner
- Thay Ä‘á»•i cháº¿ Ä‘á»™ dá»¯ liá»‡u (Normal/Test/Hard)
- Cáº¥u hÃ¬nh tÃªn dÃ¢y chuyá»n (Line Name)

**CÃ¡c tham sá»‘ cÃ³ thá»ƒ chá»‰nh sá»­a:**

| Tham sá»‘ | MÃ´ táº£ | VÃ­ dá»¥ |
|---------|-------|-------|
| **PLC_IP** | Äá»‹a chá»‰ IP cá»§a PLC | 192.168.250.1 |
| **PLC_Port** | Port káº¿t ná»‘i PLC | 9600 |
| **Camera_01_IP** | Äá»‹a chá»‰ IP Camera | 127.0.0.1 |
| **Camera_01_Port** | Port Camera | 51236 |
| **Handheld_COM_Port** | COM port mÃ¡y quÃ©t | COM3 |
| **Data_Mode** | Cháº¿ Ä‘á»™ dá»¯ liá»‡u | normal/test/hard |
| **Line_Name** | TÃªn dÃ¢y chuyá»n | Line 3 |
| **PLC_Time_Refresh** | Táº§n suáº¥t Ä‘á»c PLC (ms) | 1000 |

> **[ChÃ¨n hÃ¬nh: Giao diá»‡n App Settings vá»›i cÃ¡c tham sá»‘]**

**CÃ¡ch thay Ä‘á»•i:**
1. Nháº¥n vÃ o Ã´ giÃ¡ trá»‹ cáº§n sá»­a
2. Nháº­p giÃ¡ trá»‹ má»›i
3. Nháº¥n "LÆ°u" hoáº·c Enter
4. Há»‡ thá»‘ng sáº½ tá»± Ä‘á»™ng lÆ°u vÃ o file `App.ini`

---

### 2.2.6. Trang Cáº¥u HÃ¬nh PLC (PLC Settings)

> âš ï¸ **Chá»‰ dÃ nh cho Admin**

**Chá»©c nÄƒng:**
- Káº¿t ná»‘i vÃ  Ä‘á»c thÃ´ng sá»‘ tá»« PLC
- Upload/Download PLC recipes (file .rplc)
- Hiá»ƒn thá»‹ tráº¡ng thÃ¡i PLC realtime

**CÃ¡c chá»©c nÄƒng:**
1. **Káº¿t ná»‘i PLC:** Kiá»ƒm tra káº¿t ná»‘i TCP/IP
2. **Äá»c thÃ´ng sá»‘:** Äá»c cÃ¡c giÃ¡ trá»‹ DM tá»« PLC
3. **Upload Recipe:** Táº£i recipe tá»« file lÃªn PLC
4. **Download Recipe:** LÆ°u recipe tá»« PLC ra file

> **[ChÃ¨n hÃ¬nh: Giao diá»‡n PLC Settings]**

---

### 2.2.7. Trang Nháº­t KÃ½ Hoáº¡t Äá»™ng (Activity Logs)

> âš ï¸ **Chá»‰ dÃ nh cho Admin**

**Chá»©c nÄƒng:**
- Hiá»ƒn thá»‹ lá»‹ch sá»­ táº¥t cáº£ hoáº¡t Ä‘á»™ng trong há»‡ thá»‘ng
- Lá»c theo loáº¡i log, ngÃ y, ngÆ°á»i dÃ¹ng
- Export ra file CSV

**CÃ¡c loáº¡i log:**
- Info: ThÃ´ng tin chung
- Warning: Cáº£nh bÃ¡o
- Error: Lá»—i há»‡ thá»‘ng
- UserAction: Thao tÃ¡c ngÆ°á»i dÃ¹ng
- DeviceAction: Thao tÃ¡c thiáº¿t bá»‹
- DataChange: Thay Ä‘á»•i dá»¯ liá»‡u

**Bá»™ lá»c:**
1. Loáº¡i log (dropdown)
2. Tá»« ngÃ y - Äáº¿n ngÃ y (date picker)
3. NgÆ°á»i dÃ¹ng (text search)
4. PhÃ¢n trang (50 log/trang)

> **[ChÃ¨n hÃ¬nh: Giao diá»‡n Activity Logs vá»›i bá»™ lá»c]**

---

## 2.3. CÃ¡ch há»‡ thá»‘ng hoáº¡t Ä‘á»™ng

### Quy trÃ¬nh xá»­ lÃ½ mÃ£ QR tá»« Camera

```
[Sáº£n pháº©m Ä‘i qua Camera]
         â†“
[Camera quÃ©t mÃ£ QR] â†’ Gá»­i dá»¯ liá»‡u vá» Pháº§n má»m
         â†“
[Kiá»ƒm tra Ä‘á»‹nh dáº¡ng]
    â”œâ”€â”€ Äá»™ dÃ i < 16 kÃ½ tá»±? â†’ âŒ Lá»—i Ä‘á»‹nh dáº¡ng
    â”œâ”€â”€ KhÃ´ng chá»©a Barcode? â†’ âŒ Lá»—i Ä‘á»‹nh dáº¡ng
    â””â”€â”€ OK â†’ Tiáº¿p tá»¥c
         â†“
[Kiá»ƒm tra trÃ¹ng láº·p]
    â”œâ”€â”€ MÃ£ Ä‘Ã£ tá»“n táº¡i trong há»‡ thá»‘ng? â†’ âŒ TrÃ¹ng láº·p
    â””â”€â”€ ChÆ°a tá»“n táº¡i â†’ Tiáº¿p tá»¥c
         â†“
[LÆ°u vÃ o Queue]
    â”œâ”€â”€ QueueActive (RAM)
    â”œâ”€â”€ QueueRecord (Ä‘á»£i ghi DB)
    â””â”€â”€ ActiveSet (HashSet kiá»ƒm tra nhanh)
         â†“
[Background Worker ghi vÃ o Database]
    â”œâ”€â”€ QRProducts table (lá»‹ch sá»­ Ä‘áº§y Ä‘á»§)
    â””â”€â”€ ActiveUniqueQR table (chá»‰ mÃ£ unique)
         â†“
[Gá»­i káº¿t quáº£ vá» PLC]
    â”œâ”€â”€ Pass â†’ PLC_Reject_DM = 0
    â””â”€â”€ Fail â†’ PLC_Reject_DM = 1
         â†“
[Cáº­p nháº­t giao diá»‡n]
    â”œâ”€â”€ Counter tÄƒng
    â”œâ”€â”€ Hiá»ƒn thá»‹ mÃ£ cuá»‘i cÃ¹ng
    â””â”€â”€ ThÃªm vÃ o listbox
```

> **[ChÃ¨n hÃ¬nh: SÆ¡ Ä‘á»“ quy trÃ¬nh xá»­ lÃ½ mÃ£ QR]**

---

### Quy trÃ¬nh Ä‘á»c Counter tá»« PLC

```
[Background Worker - má»—i 1 giÃ¢y]
         â†“
[Äá»c PLC Counter qua TCP/IP]
    â”œâ”€â”€ DM[0]: Total Count (Tá»•ng)
    â”œâ”€â”€ DM[1]: ReadFail Count
    â”œâ”€â”€ DM[2]: Pass Count
    â””â”€â”€ DM[3]: Timeout Count
         â†“
[Cáº­p nháº­t biáº¿n toÃ n cá»¥c]
         â†“
[TÃ­nh sáº£n lÆ°á»£ng/giá» tá»« Database]
         â†“
[Hiá»ƒn thá»‹ lÃªn Dashboard]
```

---

### Kiáº¿n trÃºc lÆ°u trá»¯ dá»¯ liá»‡u

**3 táº§ng lÆ°u trá»¯:**

1. **RAM (HashSet):** Kiá»ƒm tra trÃ¹ng láº·p nhanh
   - `ActiveSet` chá»©a táº¥t cáº£ mÃ£ Ä‘ang hoáº¡t Ä‘á»™ng
   - Load khi khá»Ÿi Ä‘á»™ng tá»« database
   - Tá»‘c Ä‘á»™: O(1) - ráº¥t nhanh

2. **Queue (ConcurrentQueue):** Äá»‡m trÆ°á»›c khi ghi DB
   - `QueueActive`: Queue mÃ£ unique
   - `QueueRecord`: Queue lá»‹ch sá»­ Ä‘áº§y Ä‘á»§
   - TrÃ¡nh block UI khi ghi DB

3. **Database (SQLite):**
   - `QRProducts`: Lá»‹ch sá»­ táº¥t cáº£ mÃ£ (ká»ƒ cáº£ trÃ¹ng)
   - `ActiveUniqueQR`: Chá»‰ mÃ£ unique, cÃ³ index
   - `batch_history`: Lá»‹ch sá»­ Ä‘á»•i lÃ´

> **[ChÃ¨n hÃ¬nh: SÆ¡ Ä‘á»“ kiáº¿n trÃºc 3 táº§ng]**

---

# PHáº¦N 3: QUY TRÃŒNH Váº¬N HÃ€NH

## 3.1. Quy trÃ¬nh khá»Ÿi Ä‘á»™ng há»‡ thá»‘ng

### BÆ°á»›c 1: Kiá»ƒm tra trÆ°á»›c khi khá»Ÿi Ä‘á»™ng

TrÆ°á»›c khi khá»Ÿi Ä‘á»™ng pháº§n má»m, kiá»ƒm tra:

âœ… MÃ¡y tÃ­nh Ä‘Ã£ Ä‘Æ°á»£c báº­t vÃ  káº¿t ná»‘i máº¡ng
âœ… PLC Ä‘Ã£ Ä‘Æ°á»£c cáº¥p nguá»“n vÃ  sÃ¡ng Ä‘Ã¨n
âœ… Camera Ä‘Ã£ Ä‘Æ°á»£c cáº¥p nguá»“n
âœ… MÃ¡y quÃ©t cáº§m tay Ä‘Ã£ Ä‘Æ°á»£c káº¿t ná»‘i (náº¿u sá»­ dá»¥ng)
âœ… DÃ¢y máº¡ng Ethernet Ä‘Æ°á»£c cáº¯m cháº¯c cháº¯n

### BÆ°á»›c 2: Khá»Ÿi Ä‘á»™ng á»©ng dá»¥ng

1. TÃ¬m file `TApp.exe` trÃªn Desktop hoáº·c thÆ° má»¥c cÃ i Ä‘áº·t
2. Double-click Ä‘á»ƒ khá»Ÿi Ä‘á»™ng
3. Äá»£i á»©ng dá»¥ng load (khoáº£ng 5-10 giÃ¢y)

> **[ChÃ¨n hÃ¬nh: Icon á»©ng dá»¥ng TApp.exe]**

### BÆ°á»›c 3: Kiá»ƒm tra khá»Ÿi táº¡o

Khi á»©ng dá»¥ng khá»Ÿi Ä‘á»™ng, há»‡ thá»‘ng sáº½ tá»± Ä‘á»™ng:

1. **Táº¡o thÆ° má»¥c Logs** (náº¿u chÆ°a cÃ³)
2. **Load file cáº¥u hÃ¬nh** (`App.ini`)
3. **Káº¿t ná»‘i PLC:** Kiá»ƒm tra káº¿t ná»‘i TCP/IP Ä‘áº¿n PLC
4. **Káº¿t ná»‘i Camera:** Kiá»ƒm tra káº¿t ná»‘i Camera
5. **Load Database:** Äá»c lá»‹ch sá»­ lÃ´ sáº£n xuáº¥t cuá»‘i cÃ¹ng
6. **Load ActiveSet:** Náº¡p táº¥t cáº£ mÃ£ Ä‘ang hoáº¡t Ä‘á»™ng vÃ o RAM

**Quan sÃ¡t mÃ n hÃ¬nh:**
- Náº¿u thÃ nh cÃ´ng â†’ Hiá»ƒn thá»‹ mÃ n hÃ¬nh Ä‘Äƒng nháº­p
- Náº¿u lá»—i â†’ Hiá»ƒn thá»‹ thÃ´ng bÃ¡o lá»—i (xem Pháº§n 5: Xá»­ lÃ½ sá»± cá»‘)

> **[ChÃ¨n hÃ¬nh: MÃ n hÃ¬nh khá»Ÿi Ä‘á»™ng/splash screen]**

---

## 3.2. Quy trÃ¬nh Ä‘Äƒng nháº­p

### BÆ°á»›c 1: Nháº­p thÃ´ng tin Ä‘Äƒng nháº­p

1. Nháº­p **TÃªn Ä‘Äƒng nháº­p** (Username)
2. Nháº­p **Máº­t kháº©u** (Password)
3. (TÃ¹y chá»n) Náº¿u báº­t 2FA, nháº­p **MÃ£ OTP**
4. Nháº¥n nÃºt **"ÄÄƒng nháº­p"** hoáº·c phÃ­m **Enter**

> **[ChÃ¨n hÃ¬nh: MÃ n hÃ¬nh Ä‘Äƒng nháº­p]**

### BÆ°á»›c 2: XÃ¡c thá»±c

Há»‡ thá»‘ng sáº½ kiá»ƒm tra:
- TÃªn Ä‘Äƒng nháº­p vÃ  máº­t kháº©u cÃ³ Ä‘Ãºng khÃ´ng?
- TÃ i khoáº£n cÃ³ bá»‹ khÃ³a khÃ´ng?
- MÃ£ OTP cÃ³ há»£p lá»‡ khÃ´ng? (náº¿u báº­t 2FA)

### BÆ°á»›c 3: VÃ o há»‡ thá»‘ng

**Náº¿u Ä‘Äƒng nháº­p thÃ nh cÃ´ng:**
- MÃ n hÃ¬nh chÃ­nh Ä‘Æ°á»£c hiá»ƒn thá»‹
- Header bar hiá»ƒn thá»‹ tÃªn ngÆ°á»i dÃ¹ng + vai trÃ²:
  - **[Quáº£n LÃ½]** â†’ mÃ u Ä‘á» (Admin)
  - **[Váº­n HÃ nh]** â†’ mÃ u xanh (Operator)
- Navigation menu hiá»ƒn thá»‹ cÃ¡c chá»©c nÄƒng tÆ°Æ¡ng á»©ng vá»›i quyá»n
- Log ghi láº¡i: `UA-LOGIN-01: ÄÄƒng nháº­p thÃ nh cÃ´ng`

**Náº¿u Ä‘Äƒng nháº­p tháº¥t báº¡i:**
- Hiá»ƒn thá»‹ thÃ´ng bÃ¡o lá»—i
- Log ghi láº¡i: `ERR-LOGIN-01: ÄÄƒng nháº­p tháº¥t báº¡i`

> **[ChÃ¨n hÃ¬nh: Header bar vá»›i tÃªn user vÃ  vai trÃ²]**

---

## 3.3. Quy trÃ¬nh báº¯t Ä‘áº§u sáº£n xuáº¥t, Ä‘á»•i lÃ´

> âš ï¸ **LÆ¯U Ã QUAN TRá»ŒNG:**
> Quy trÃ¬nh Ä‘á»•i lÃ´ áº£nh hÆ°á»Ÿng trá»±c tiáº¿p Ä‘áº¿n dá»¯ liá»‡u sáº£n xuáº¥t.
> Vui lÃ²ng kiá»ƒm tra ká»¹ thÃ´ng tin trÆ°á»›c khi xÃ¡c nháº­n!

### BÆ°á»›c 1: Nháº¥n nÃºt "Äá»•i LÃ´"

1. Táº¡i trang **Dashboard**, tÃ¬m nÃºt **"Äá»•i LÃ´"** (hoáº·c "Change Batch")
2. Nháº¥n vÃ o nÃºt nÃ y

> **[ChÃ¨n hÃ¬nh: NÃºt "Äá»•i LÃ´" trÃªn Dashboard]**

### BÆ°á»›c 2: Chá»n cháº¿ Ä‘á»™ Ä‘á»•i lÃ´

Há»‡ thá»‘ng há»— trá»£ 2 cháº¿ Ä‘á»™:

#### Cháº¿ Ä‘á»™ 1: Load tá»« ERP (Google Sheets)

**Khi nÃ o dÃ¹ng:** Khi sáº£n pháº©m Ä‘Ã£ cÃ³ trong há»‡ thá»‘ng ERP

**CÃ¡c bÆ°á»›c:**
1. NÃºt "Äá»•i LÃ´" chuyá»ƒn sang cháº¿ Ä‘á»™ "Táº£i ERP"
2. Há»‡ thá»‘ng tá»± Ä‘á»™ng káº¿t ná»‘i Google Sheets
3. ComboBox "Sá»‘ LÃ´" hiá»ƒn thá»‹ danh sÃ¡ch sáº£n pháº©m
4. Chá»n sáº£n pháº©m tá»« danh sÃ¡ch
5. Barcode tá»± Ä‘á»™ng Ä‘iá»n

> **[ChÃ¨n hÃ¬nh: ComboBox vá»›i danh sÃ¡ch ERP]**

**LÆ°u Ã½:**
- Cáº§n cÃ³ káº¿t ná»‘i Internet
- Náº¿u lá»—i káº¿t ná»‘i â†’ Hiá»ƒn thá»‹ thÃ´ng bÃ¡o, ghi log `ERP-F-01`

#### Cháº¿ Ä‘á»™ 2: Nháº­p thá»§ cÃ´ng

**Khi nÃ o dÃ¹ng:** Khi sáº£n pháº©m chÆ°a cÃ³ trong ERP hoáº·c ERP lá»—i

**CÃ¡c bÆ°á»›c:**

##### **BÆ°á»›c 1: Nháº­p thÃ´ng tin lÃ´ sáº£n xuáº¥t**

1. Nháº­p **Sá»‘ LÃ´** (BatchCode) vÃ o Ã´ "Sá»‘ LÃ´"
2. Nháº­p **Barcode** vÃ o Ã´ "Barcode"
3. Kiá»ƒm tra ká»¹ thÃ´ng tin Ä‘Ã£ nháº­p

> **[ChÃ¨n hÃ¬nh: Ã” nháº­p Sá»‘ LÃ´ vÃ  Barcode]**

##### **BÆ°á»›c 2: XÃ¡c thá»±c quyá»n (dÃ nh cho Operator)**

> âš ï¸ **QUAN TRá»ŒNG: Chá»‰ Ã¡p dá»¥ng cho tÃ i khoáº£n Operator**

**Táº¡i sao cáº§n xÃ¡c thá»±c?**
- Nháº­p thá»§ cÃ´ng cÃ³ thá»ƒ gÃ¢y sai sÃ³t dá»¯ liá»‡u nghiÃªm trá»ng
- Cáº§n cÃ³ sá»± giÃ¡m sÃ¡t cá»§a Admin Ä‘á»ƒ Ä‘áº£m báº£o thÃ´ng tin chÃ­nh xÃ¡c
- TrÃ¡nh nháº­p nháº§m Barcode hoáº·c Batch Code

**Quy trÃ¬nh xÃ¡c thá»±c:**

Khi **Operator** nháº­p thá»§ cÃ´ng, há»‡ thá»‘ng sáº½ yÃªu cáº§u **mÃ£ 2FA tá»« Admin**:

1. Sau khi nháº­p Sá»‘ LÃ´ vÃ  Barcode, nháº¥n nÃºt **"XÃ¡c nháº­n"**
2. Há»‡ thá»‘ng hiá»ƒn thá»‹ dialog yÃªu cáº§u mÃ£ xÃ¡c thá»±c:

```
ğŸ” YÃŠU Cáº¦U XÃC THá»°C ADMIN

Báº¡n Ä‘ang nháº­p thÃ´ng tin lÃ´ sáº£n xuáº¥t thá»§ cÃ´ng.
Vui lÃ²ng liÃªn há»‡ Admin Ä‘á»ƒ láº¥y mÃ£ xÃ¡c thá»±c.

Sá»‘ LÃ´: [BatchCode Ä‘Ã£ nháº­p]
Barcode: [Barcode Ä‘Ã£ nháº­p]

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Nháº­p mÃ£ 2FA:  [_________]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[XÃ¡c nháº­n]  [Há»§y]
```

3. **Operator** gá»i Admin Ä‘áº¿n
4. **Admin** xem thÃ´ng tin Sá»‘ LÃ´ vÃ  Barcode trÃªn mÃ n hÃ¬nh
5. **Admin** kiá»ƒm tra thÃ´ng tin cÃ³ chÃ­nh xÃ¡c khÃ´ng
6. Náº¿u Ä‘Ãºng, **Admin** nháº­p **mÃ£ 2FA** (mÃ£ xÃ¡c thá»±c cá»§a Admin)
7. Nháº¥n **"XÃ¡c nháº­n"**

> **[ChÃ¨n hÃ¬nh: Dialog yÃªu cáº§u mÃ£ 2FA]**

**Náº¿u xÃ¡c thá»±c thÃ nh cÃ´ng:**
- âœ… ThÃ´ng bÃ¡o: "XÃ¡c thá»±c thÃ nh cÃ´ng!"
- ThÃ´ng tin lÃ´ Ä‘Æ°á»£c cáº­p nháº­t
- Log ghi láº¡i: `UA-F-03: Operator [username] nháº­p thá»§ cÃ´ng, xÃ¡c thá»±c bá»Ÿi Admin [admin_username]`

**Náº¿u xÃ¡c thá»±c tháº¥t báº¡i:**
- âŒ ThÃ´ng bÃ¡o: "MÃ£ 2FA khÃ´ng Ä‘Ãºng. Vui lÃ²ng thá»­ láº¡i."
- ThÃ´ng tin lÃ´ KHÃ”NG Ä‘Æ°á»£c cáº­p nháº­t
- Operator cáº§n nháº­p láº¡i hoáº·c há»§y

**LÆ°u Ã½:**
- âš ï¸ **Chá»‰ Admin** má»›i cÃ³ mÃ£ 2FA
- âš ï¸ MÃ£ 2FA lÃ  máº­t kháº©u cá»§a tÃ i khoáº£n Admin
- âš ï¸ Admin pháº£i **kiá»ƒm tra ká»¹** Sá»‘ LÃ´ vÃ  Barcode trÆ°á»›c khi nháº­p mÃ£
- âš ï¸ Náº¿u sai thÃ´ng tin â†’ Admin tá»« chá»‘i vÃ  yÃªu cáº§u Operator nháº­p láº¡i

**TrÆ°á»ng há»£p Ä‘áº·c biá»‡t:**
- Náº¿u tÃ i khoáº£n Ä‘Äƒng nháº­p lÃ  **Admin** â†’ KHÃ”NG cáº§n xÃ¡c thá»±c 2FA
- Admin cÃ³ thá»ƒ nháº­p thá»§ cÃ´ng trá»±c tiáº¿p mÃ  khÃ´ng cáº§n mÃ£ bá»• sung

---

##### **BÆ°á»›c 3: HoÃ n táº¥t (sau khi xÃ¡c thá»±c thÃ nh cÃ´ng)**

Sau khi xÃ¡c thá»±c thÃ nh cÃ´ng (hoáº·c Admin tá»± nháº­p), há»‡ thá»‘ng sáº½:
1. Cáº­p nháº­t Sá»‘ LÃ´ vÃ  Barcode vÃ o há»‡ thá»‘ng
2. Hiá»ƒn thá»‹ thÃ´ng tin má»›i trÃªn Dashboard
3. Ghi log hoáº¡t Ä‘á»™ng
4. Sáºµn sÃ ng cho sáº£n xuáº¥t

> **[ChÃ¨n hÃ¬nh: MÃ n hÃ¬nh sau khi nháº­p thá»§ cÃ´ng thÃ nh cÃ´ng]**

### BÆ°á»›c 3: XÃ¡c nháº­n Ä‘á»•i lÃ´

1. Sau khi Ä‘iá»n Ä‘áº§y Ä‘á»§ thÃ´ng tin, nháº¥n nÃºt **"XÃ¡c Nháº­n"**
2. Há»‡ thá»‘ng hiá»ƒn thá»‹ há»™p thoáº¡i xÃ¡c nháº­n:

```
Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n Ä‘á»•i lÃ´?
LÃ´ má»›i: [BatchCode]
Barcode: [Barcode]

[XÃ¡c nháº­n]  [Há»§y]
```

3. Nháº¥n **"XÃ¡c nháº­n"** Ä‘á»ƒ tiáº¿p tá»¥c

> **[ChÃ¨n hÃ¬nh: Há»™p thoáº¡i xÃ¡c nháº­n Ä‘á»•i lÃ´]**

### BÆ°á»›c 4: Há»‡ thá»‘ng xá»­ lÃ½

Khi xÃ¡c nháº­n, há»‡ thá»‘ng sáº½:

1. âœ… Cáº­p nháº­t `BatchCode` vÃ  `Barcode` vÃ o biáº¿n toÃ n cá»¥c
2. âœ… Ghi lá»‹ch sá»­ vÃ o database `batch_history`
3. âœ… Reset bá»™ Ä‘áº¿m Camera vá» 0
4. âœ… Ghi log: `UA-F-02: Äá»•i lÃ´ thÃ nh cÃ´ng`
5. âœ… Cáº­p nháº­t hiá»ƒn thá»‹ trÃªn Dashboard

**Tráº¡ng thÃ¡i á»©ng dá»¥ng chuyá»ƒn sang:**
- ğŸŸ¢ **"Sáºµn SÃ ng"** â†’ CÃ³ thá»ƒ báº¯t Ä‘áº§u sáº£n xuáº¥t

> **[ChÃ¨n hÃ¬nh: Dashboard sau khi Ä‘á»•i lÃ´ thÃ nh cÃ´ng]**

### BÆ°á»›c 5: Kiá»ƒm tra láº¡i

Sau khi Ä‘á»•i lÃ´, **Báº®T BUá»˜C** kiá»ƒm tra:

âœ… Sá»‘ LÃ´ hiá»ƒn thá»‹ Ä‘Ãºng trÃªn Dashboard
âœ… Barcode hiá»ƒn thá»‹ Ä‘Ãºng
âœ… Tráº¡ng thÃ¡i á»©ng dá»¥ng lÃ  "Sáºµn SÃ ng" (mÃ u xanh)
âœ… Bá»™ Ä‘áº¿m Camera Ä‘Ã£ reset vá» 0
âœ… PLC vÃ  Camera Ä‘á»u káº¿t ná»‘i (Ä‘Ã¨n xanh)

**Náº¿u cÃ³ báº¥t ká»³ thÃ´ng tin nÃ o sai â†’ Äá»•i láº¡i ngay!**

---

## 3.4. Quy trÃ¬nh quÃ©t vÃ  tra cá»©u mÃ£ QR

### Chá»©c nÄƒng

Tra cá»©u thÃ´ng tin chi tiáº¿t cá»§a má»™t mÃ£ QR Ä‘Ã£ Ä‘Æ°á»£c quÃ©t vÃ o há»‡ thá»‘ng.

### BÆ°á»›c 1: Chuyá»ƒn sang trang Scan

1. Nháº¥n vÃ o menu **"Scan"** (hoáº·c nÃºt "QuÃ©t" trÃªn Dashboard)
2. MÃ n hÃ¬nh chuyá»ƒn sang trang Scan

> **[ChÃ¨n hÃ¬nh: Menu Scan]**

### BÆ°á»›c 2: Káº¿t ná»‘i mÃ¡y quÃ©t

**Náº¿u sá»­ dá»¥ng mÃ¡y quÃ©t cáº§m tay:**

1. Nháº¥n nÃºt **"Káº¿t ná»‘i Scanner"**
2. Há»‡ thá»‘ng má»Ÿ káº¿t ná»‘i COM port (COM3 máº·c Ä‘á»‹nh)
3. Khi káº¿t ná»‘i thÃ nh cÃ´ng â†’ NÃºt chuyá»ƒn sang "Ngáº¯t káº¿t ná»‘i"

> **[ChÃ¨n hÃ¬nh: NÃºt "Káº¿t ná»‘i Scanner"]**

### BÆ°á»›c 3: QuÃ©t mÃ£

**CÃ¡ch 1: DÃ¹ng mÃ¡y quÃ©t cáº§m tay**
1. Äáº£m báº£o Ä‘Ã£ káº¿t ná»‘i (bÆ°á»›c 2)
2. HÆ°á»›ng mÃ¡y quÃ©t vÃ o mÃ£ QR
3. Nháº¥n nÃºt quÃ©t trÃªn mÃ¡y quÃ©t
4. Dá»¯ liá»‡u tá»± Ä‘á»™ng hiá»ƒn thá»‹

**CÃ¡ch 2: Nháº­p thá»§ cÃ´ng**
1. Nháº­p mÃ£ QR vÃ o Ã´ "MÃ£ QR"
2. Nháº¥n **Enter** hoáº·c nÃºt **"TÃ¬m kiáº¿m"**

> **[ChÃ¨n hÃ¬nh: Ã” nháº­p mÃ£ QR vÃ  nÃºt tÃ¬m kiáº¿m]**

### BÆ°á»›c 4: Xem káº¿t quáº£

Há»‡ thá»‘ng sáº½ tÃ¬m kiáº¿m trong database vÃ  hiá»ƒn thá»‹:

**Náº¿u tÃ¬m tháº¥y:**
- QR Content: Ná»™i dung mÃ£ QR
- Batch Code: LÃ´ sáº£n xuáº¥t
- Barcode: MÃ£ váº¡ch sáº£n pháº©m
- Status: Tráº¡ng thÃ¡i (Pass/Fail/Duplicate/...)
- User: NgÆ°á»i thao tÃ¡c
- Timestamp: Thá»i gian quÃ©t

**Náº¿u khÃ´ng tÃ¬m tháº¥y:**
- Hiá»ƒn thá»‹ thÃ´ng bÃ¡o: "KhÃ´ng tÃ¬m tháº¥y mÃ£ QR trong há»‡ thá»‘ng"

> **[ChÃ¨n hÃ¬nh: Káº¿t quáº£ tra cá»©u mÃ£ QR]**

---

## 3.5. Quy trÃ¬nh thÃªm mÃ£ thá»§ cÃ´ng

### Khi nÃ o dÃ¹ng?

- Khi cáº§n bá»• sung mÃ£ QR vÃ o há»‡ thá»‘ng khÃ´ng qua camera
- Khi camera lá»¡ bá» sÃ³t má»™t sá»‘ mÃ£
- Khi cáº§n test há»‡ thá»‘ng

### BÆ°á»›c 1: Chuyá»ƒn sang trang Add Code

1. Nháº¥n vÃ o menu **"Add Code"**
2. MÃ n hÃ¬nh chuyá»ƒn sang trang Add Code

> **[ChÃ¨n hÃ¬nh: Menu Add Code]**

### BÆ°á»›c 2: Kiá»ƒm tra Ä‘iá»u kiá»‡n

TrÆ°á»›c khi thÃªm mÃ£, Ä‘áº£m báº£o:

âœ… ÄÃ£ cÃ³ lÃ´ sáº£n xuáº¥t (BatchCode Ä‘Ã£ Ä‘Æ°á»£c cÃ i Ä‘áº·t)
âœ… ÄÃ£ cÃ³ Barcode sáº£n pháº©m
âœ… Tráº¡ng thÃ¡i á»©ng dá»¥ng khÃ´ng pháº£i "Lá»—i TB"

**Náº¿u chÆ°a cÃ³ lÃ´:**
- Há»‡ thá»‘ng sáº½ bÃ¡o lá»—i: "ChÆ°a cÃ³ thÃ´ng tin lÃ´ sáº£n xuáº¥t"
- Tráº¡ng thÃ¡i hiá»ƒn thá»‹: ğŸ”´ Äá»

> **[ChÃ¨n hÃ¬nh: ThÃ´ng bÃ¡o lá»—i chÆ°a cÃ³ lÃ´]**

### BÆ°á»›c 3: Nháº­p mÃ£ QR

1. Click vÃ o Ã´ **"Nháº­p mÃ£ QR"**
2. Nháº­p hoáº·c paste mÃ£ QR
3. Nháº¥n **Enter** hoáº·c nÃºt **"ThÃªm"**

> **[ChÃ¨n hÃ¬nh: Ã” nháº­p mÃ£ QR]**

### BÆ°á»›c 4: Há»‡ thá»‘ng kiá»ƒm tra

Há»‡ thá»‘ng sáº½ kiá»ƒm tra cÃ¡c Ä‘iá»u kiá»‡n:

#### Kiá»ƒm tra 1: Äá»™ dÃ i

- MÃ£ pháº£i cÃ³ Ä‘á»™ dÃ i â‰¥ 16 kÃ½ tá»±
- Náº¿u ngáº¯n hÆ¡n â†’ ğŸ”´ **Lá»—i:** "MÃ£ QR quÃ¡ ngáº¯n (< 16 kÃ½ tá»±)"

#### Kiá»ƒm tra 2: Chá»©a Barcode

- MÃ£ pháº£i chá»©a Barcode cá»§a sáº£n pháº©m hiá»‡n táº¡i
- Náº¿u khÃ´ng â†’ ğŸ”´ **Lá»—i:** "MÃ£ khÃ´ng chá»©a Barcode sáº£n pháº©m"

#### Kiá»ƒm tra 3: TrÃ¹ng láº·p

- Kiá»ƒm tra trong `ActiveSet`
- Náº¿u Ä‘Ã£ tá»“n táº¡i â†’ ğŸŸ¡ **Cáº£nh bÃ¡o:** "MÃ£ Ä‘Ã£ tá»“n táº¡i (TRÃ™NG)"

### BÆ°á»›c 5: Xem káº¿t quáº£

**Náº¿u thÃ nh cÃ´ng:**
- Tráº¡ng thÃ¡i: ğŸŸ¢ Xanh - "ThÃªm thÃ nh cÃ´ng"
- MÃ£ Ä‘Æ°á»£c thÃªm vÃ o Queue
- Console log: `[OK] QR: [mÃ£] - ThÃªm vÃ o queue`
- Báº£ng Queue cáº­p nháº­t hiá»ƒn thá»‹ mÃ£ má»›i

**Náº¿u tháº¥t báº¡i:**
- Tráº¡ng thÃ¡i: ğŸ”´ Äá» hoáº·c ğŸŸ¡ Cam - "Lá»—i/Cáº£nh bÃ¡o"
- Console log: `[FAIL] LÃ½ do lá»—i`

> **[ChÃ¨n hÃ¬nh: Tráº¡ng thÃ¡i thÃ nh cÃ´ng vÃ  tháº¥t báº¡i]**

### BÆ°á»›c 6: Kiá»ƒm tra Queue

Sau khi thÃªm, kiá»ƒm tra báº£ng **Queue** (báº£ng dÆ°á»›i cÃ¹ng):

- Hiá»ƒn thá»‹ 50 mÃ£ gáº§n nháº¥t Ä‘ang chá» xá»­ lÃ½
- Background worker sáº½ tá»± Ä‘á»™ng ghi vÃ o database
- Sau vÃ i giÃ¢y, mÃ£ sáº½ biáº¿n máº¥t khá»i Queue (Ä‘Ã£ ghi xong)

> **[ChÃ¨n hÃ¬nh: Báº£ng Queue hiá»ƒn thá»‹ mÃ£ Ä‘ang chá»]**

---

## 3.6. Quy trÃ¬nh xÃ³a lá»—i vÃ  reset counter

### 3.6.1. XÃ³a Ä‘áº¿m PLC

**Khi nÃ o dÃ¹ng:**
- Khi báº¯t Ä‘áº§u ca lÃ m viá»‡c má»›i
- Khi muá»‘n reset sá»‘ liá»‡u thá»‘ng kÃª

**CÃ¡c bÆ°á»›c:**

1. Táº¡i trang **Dashboard**, tÃ¬m nÃºt **"XÃ³a Ä‘áº¿m PLC"**
2. Nháº¥n nÃºt
3. Há»‡ thá»‘ng hiá»ƒn thá»‹ xÃ¡c nháº­n:

```
Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n xÃ³a bá»™ Ä‘áº¿m PLC?
HÃ nh Ä‘á»™ng nÃ y sáº½ reset:
- Tá»•ng sá»‘ sáº£n pháº©m
- Sá»‘ Pass
- Sá»‘ Fail

[XÃ¡c nháº­n]  [Há»§y]
```

4. Nháº¥n **"XÃ¡c nháº­n"**
5. Há»‡ thá»‘ng gá»­i lá»‡nh reset Ä‘áº¿n PLC
6. Bá»™ Ä‘áº¿m PLC vá» 0
7. Ghi log: `FD-UA-1: User xÃ³a sá»‘ Ä‘áº¿m`

> **[ChÃ¨n hÃ¬nh: NÃºt "XÃ³a Ä‘áº¿m PLC" vÃ  há»™p thoáº¡i xÃ¡c nháº­n]**

**LÆ°u Ã½:**
- âš ï¸ HÃ nh Ä‘á»™ng nÃ y **KHÃ”NG** xÃ³a dá»¯ liá»‡u trong database
- âš ï¸ Chá»‰ reset bá»™ Ä‘áº¿m hiá»ƒn thá»‹ trÃªn PLC
- âš ï¸ Cáº§n cÃ³ quyá»n Ä‘á»ƒ thá»±c hiá»‡n

---

### 3.6.2. XÃ³a lá»—i PLC

**Khi nÃ o dÃ¹ng:**
- Khi PLC bÃ¡o lá»—i
- Khi cáº§n xÃ³a dá»¯ liá»‡u lá»—i tá»“n Ä‘á»ng

**CÃ¡c bÆ°á»›c:**

1. Táº¡i trang **Dashboard**, tÃ¬m nÃºt **"XÃ³a lá»—i PLC"**
2. Nháº¥n nÃºt
3. Há»‡ thá»‘ng gá»­i lá»‡nh clear error Ä‘áº¿n PLC
4. PLC xÃ³a dá»¯ liá»‡u lá»—i
5. Ghi log: `FD-UA-2: User xÃ³a dá»¯ liá»‡u PLC`

> **[ChÃ¨n hÃ¬nh: NÃºt "XÃ³a lá»—i PLC"]**

---

# PHáº¦N 4: Cáº¤U HÃŒNH Há»† THá»NG

> âš ï¸ **PHáº¦N NÃ€Y CHá»ˆ DÃ€NH CHO ADMIN**

## 4.1. Cáº¥u hÃ¬nh á»©ng dá»¥ng

### Truy cáº­p trang cáº¥u hÃ¬nh

1. ÄÄƒng nháº­p vá»›i tÃ i khoáº£n **Admin**
2. Nháº¥n vÃ o menu **"App Settings"**
3. MÃ n hÃ¬nh hiá»ƒn thá»‹ danh sÃ¡ch táº¥t cáº£ tham sá»‘ cáº¥u hÃ¬nh

> **[ChÃ¨n hÃ¬nh: Menu App Settings]**

### CÃ¡c tham sá»‘ quan trá»ng

#### Cáº¥u hÃ¬nh PLC

| Tham sá»‘ | MÃ´ táº£ | GiÃ¡ trá»‹ máº·c Ä‘á»‹nh |
|---------|-------|------------------|
| **PLC_IP** | Äá»‹a chá»‰ IP cá»§a PLC Omron | 192.168.250.1 |
| **PLC_Port** | Port káº¿t ná»‘i PLC | 9600 |
| **PLC_Time_Refresh** | Táº§n suáº¥t Ä‘á»c PLC (ms) | 1000 |
| **PLC_Test_Mode** | Cháº¿ Ä‘á»™ test (dÃ¹ng localhost) | True/False |

#### Cáº¥u hÃ¬nh Camera

| Tham sá»‘ | MÃ´ táº£ | GiÃ¡ trá»‹ máº·c Ä‘á»‹nh |
|---------|-------|------------------|
| **Camera_01_IP** | Äá»‹a chá»‰ IP Camera Datalogic | 127.0.0.1 |
| **Camera_01_Port** | Port káº¿t ná»‘i Camera | 51236 |

#### Cáº¥u hÃ¬nh Scanner

| Tham sá»‘ | MÃ´ táº£ | GiÃ¡ trá»‹ máº·c Ä‘á»‹nh |
|---------|-------|------------------|
| **Handheld_COM_Port** | COM port mÃ¡y quÃ©t cáº§m tay | COM3 |

#### Cáº¥u hÃ¬nh Sáº£n xuáº¥t

| Tham sá»‘ | MÃ´ táº£ | GiÃ¡ trá»‹ máº·c Ä‘á»‹nh |
|---------|-------|------------------|
| **Line_Name** | TÃªn dÃ¢y chuyá»n sáº£n xuáº¥t | Line 3 |
| **Data_Mode** | Cháº¿ Ä‘á»™ dá»¯ liá»‡u | normal |

**CÃ¡c cháº¿ Ä‘á»™ Data_Mode:**
- `normal`: Ghi cáº£ báº£ng QRProducts vÃ  ActiveUniqueQR
- `test`: Chá»‰ test, khÃ´ng ghi DB
- `hard`: Ghi trá»±c tiáº¿p, khÃ´ng qua queue

#### Cáº¥u hÃ¬nh TÃ¹y chá»n

| Tham sá»‘ | MÃ´ táº£ | GiÃ¡ trá»‹ máº·c Ä‘á»‹nh |
|---------|-------|------------------|
| **AppHideEnable** | Cho phÃ©p thu nhá» vÃ o tray | True |
| **AppTwoFA_Enabled** | Báº­t xÃ¡c thá»±c 2 yáº¿u tá»‘ | False |

### CÃ¡ch thay Ä‘á»•i tham sá»‘

1. TÃ¬m tham sá»‘ cáº§n sá»­a trong danh sÃ¡ch
2. Click vÃ o Ã´ **"GiÃ¡ trá»‹"**
3. Nháº­p giÃ¡ trá»‹ má»›i
4. Nháº¥n **Enter** hoáº·c click ra ngoÃ i Ä‘á»ƒ lÆ°u
5. Há»‡ thá»‘ng tá»± Ä‘á»™ng ghi vÃ o file `App.ini`

> **[ChÃ¨n hÃ¬nh: Chá»‰nh sá»­a tham sá»‘]**

**LÆ°u Ã½:**
- âš ï¸ Má»™t sá»‘ tham sá»‘ yÃªu cáº§u **khá»Ÿi Ä‘á»™ng láº¡i á»©ng dá»¥ng** Ä‘á»ƒ cÃ³ hiá»‡u lá»±c
- âš ï¸ Kiá»ƒm tra ká»¹ trÆ°á»›c khi lÆ°u, tham sá»‘ sai cÃ³ thá»ƒ lÃ m há»‡ thá»‘ng khÃ´ng hoáº¡t Ä‘á»™ng

### Vá»‹ trÃ­ file cáº¥u hÃ¬nh

File `App.ini` Ä‘Æ°á»£c lÆ°u táº¡i:
```
C:\Users\[Username]\AppData\Local\TApp\Configs\App.ini
```

> **[ChÃ¨n hÃ¬nh: Cáº¥u trÃºc thÆ° má»¥c chá»©a file App.ini]**

---

## 4.2. Cáº¥u hÃ¬nh Recipe PLC

> âš ï¸ **PHáº¦N NÃ€Y CHá»ˆ DÃ€NH CHO ADMIN**

### Giá»›i thiá»‡u

Trang **PLC Settings** dÃ¹ng Ä‘á»ƒ quáº£n lÃ½ vÃ  cáº¥u hÃ¬nh cÃ¡c **Recipe** (cÃ´ng thá»©c) cho há»‡ thá»‘ng PLC. Recipe chá»©a cÃ¡c thÃ´ng sá»‘ Ä‘iá»u khiá»ƒn quan trá»ng:

- **Delay Camera (Äá»™ trá»… kÃ­ch camera):** Thá»i gian trá»… tá»« khi cáº£m biáº¿n phÃ¡t hiá»‡n sáº£n pháº©m Ä‘áº¿n khi camera chá»¥p (ms)
- **Delay Reject (Äá»™ trá»… loáº¡i):** Thá»i gian trá»… tá»« khi phÃ¡t hiá»‡n lá»—i Ä‘áº¿n khi kÃ­ch hoáº¡t cÆ¡ cáº¥u loáº¡i (ms)
- **Reject Streng (CÆ°á»ng Ä‘á»™ loáº¡i):** Sá»©c máº¡nh/thá»i gian kÃ­ch hoáº¡t xi lanh loáº¡i (ms hoáº·c %)

**CÃ³ 2 loáº¡i Recipe:**
1. **Recipe thÆ°á»ng:** DÃ¹ng cho sáº£n pháº©m phá»• thÃ´ng
2. **Recipe CS (Customer Specific):** DÃ¹ng cho sáº£n pháº©m khÃ¡ch hÃ ng Ä‘áº·c biá»‡t

---

### Truy cáº­p trang cáº¥u hÃ¬nh Recipe

1. ÄÄƒng nháº­p vá»›i tÃ i khoáº£n **Admin**
2. Nháº¥n vÃ o menu **"PLC Settings"**
3. MÃ n hÃ¬nh hiá»ƒn thá»‹ giao diá»‡n cáº¥u hÃ¬nh Recipe

> **[ChÃ¨n hÃ¬nh: Menu PLC Settings]**

**Giao diá»‡n chÃ­nh bao gá»“m:**
- **Tab Recipe thÆ°á»ng:** Quáº£n lÃ½ recipe phá»• thÃ´ng
- **Tab Recipe CS:** Quáº£n lÃ½ recipe khÃ¡ch hÃ ng Ä‘áº·c biá»‡t
- **Dropdown chá»n Recipe:** Danh sÃ¡ch cÃ¡c recipe Ä‘Ã£ lÆ°u
- **3 Ã´ nháº­p tham sá»‘:** Delay Camera, Delay Reject, Reject Streng
- **Monitor Camera:** Xem trá»±c tiáº¿p hÃ¬nh áº£nh tá»« camera
- **NÃºt LÆ°u:** LÆ°u recipe vÃ o file vÃ  ghi xuá»‘ng PLC

> **[ChÃ¨n hÃ¬nh: Giao diá»‡n PLC Settings Ä‘áº§y Ä‘á»§]**

---

## CÃ¡c tham sá»‘ Recipe

### 1. Delay Camera (Äá»™ trá»… kÃ­ch camera)

**KÃ½ hiá»‡u:** `DelayCamera` hoáº·c `Delay Triger`

**ÄÆ¡n vá»‹:** Mili giÃ¢y (ms)

**Ã nghÄ©a:**
- Thá»i gian trá»… tá»« khi cáº£m biáº¿n phÃ¡t hiá»‡n sáº£n pháº©m Ä‘áº¿n khi camera báº¯t Ä‘áº§u chá»¥p
- Äáº£m báº£o sáº£n pháº©m Ä‘Ã£ á»Ÿ Ä‘Ãºng vá»‹ trÃ­ trÆ°á»›c khi chá»¥p

**GiÃ¡ trá»‹ máº·c Ä‘á»‹nh:** 1000 ms (1 giÃ¢y)

**CÃ¡ch Ä‘iá»u chá»‰nh:**
- **TÄƒng giÃ¡ trá»‹:** Náº¿u sáº£n pháº©m chÆ°a Ä‘áº¿n vá»‹ trÃ­ camera khi chá»¥p (áº£nh bá»‹ lá»‡ch)
- **Giáº£m giÃ¡ trá»‹:** Náº¿u sáº£n pháº©m Ä‘Ã£ qua vá»‹ trÃ­ camera khi chá»¥p (áº£nh bá»‹ lá»‡ch ngÆ°á»£c)

**VÃ­ dá»¥:**
- BÄƒng táº£i cháº¡y nhanh â†’ Delay = 500-800 ms
- BÄƒng táº£i cháº¡y cháº­m â†’ Delay = 1200-1500 ms

> **[ChÃ¨n hÃ¬nh: Minh há»a Delay Camera]**

---

### 2. Delay Reject (Äá»™ trá»… loáº¡i)

**KÃ½ hiá»‡u:** `DelayReject`

**ÄÆ¡n vá»‹:** Mili giÃ¢y (ms)

**Ã nghÄ©a:**
- Thá»i gian trá»… tá»« khi phÃ¡t hiá»‡n sáº£n pháº©m lá»—i (QR NG) Ä‘áº¿n khi kÃ­ch hoáº¡t xi lanh loáº¡i
- Äáº£m báº£o sáº£n pháº©m lá»—i Ä‘Ã£ Ä‘áº¿n Ä‘Ãºng vá»‹ trÃ­ cÆ¡ cáº¥u loáº¡i

**GiÃ¡ trá»‹ máº·c Ä‘á»‹nh:** 2000 ms (2 giÃ¢y)

**CÃ¡ch Ä‘iá»u chá»‰nh:**
- **TÄƒng giÃ¡ trá»‹:** Náº¿u xi lanh Ä‘áº©y sá»›m (chÆ°a cÃ³ sáº£n pháº©m lá»—i á»Ÿ vá»‹ trÃ­ loáº¡i)
- **Giáº£m giÃ¡ trá»‹:** Náº¿u xi lanh Ä‘áº©y muá»™n (sáº£n pháº©m lá»—i Ä‘Ã£ qua vá»‹ trÃ­ loáº¡i)

**LÆ°u Ã½:**
- Phá»¥ thuá»™c vÃ o khoáº£ng cÃ¡ch giá»¯a camera vÃ  vá»‹ trÃ­ loáº¡i
- Phá»¥ thuá»™c vÃ o tá»‘c Ä‘á»™ bÄƒng táº£i

> **[ChÃ¨n hÃ¬nh: Minh há»a Delay Reject]**

---

### 3. Reject Streng (CÆ°á»ng Ä‘á»™ loáº¡i)

**KÃ½ hiá»‡u:** `RejectStreng`

**ÄÆ¡n vá»‹:** Mili giÃ¢y (ms) hoáº·c % (tÃ¹y cáº¥u hÃ¬nh PLC)

**Ã nghÄ©a:**
- Thá»i gian kÃ­ch hoáº¡t xi lanh loáº¡i
- Hoáº·c cÆ°á»ng Ä‘á»™/sá»©c máº¡nh Ä‘áº©y cá»§a xi lanh (náº¿u dÃ¹ng van tá»· lá»‡)

**GiÃ¡ trá»‹ máº·c Ä‘á»‹nh:** 20 (ms hoáº·c %)

**CÃ¡ch Ä‘iá»u chá»‰nh:**
- **TÄƒng giÃ¡ trá»‹:** Náº¿u xi lanh Ä‘áº©y yáº¿u, sáº£n pháº©m lá»—i khÃ´ng bá»‹ loáº¡i háº¿t
- **Giáº£m giÃ¡ trá»‹:** Náº¿u xi lanh Ä‘áº©y quÃ¡ máº¡nh, lÃ m há»ng sáº£n pháº©m hoáº·c thiáº¿t bá»‹

**LÆ°u Ã½:**
- GiÃ¡ trá»‹ quÃ¡ nhá» â†’ Sáº£n pháº©m lá»—i khÃ´ng bá»‹ loáº¡i
- GiÃ¡ trá»‹ quÃ¡ lá»›n â†’ TiÃªu hao khÃ­ nÃ©n, gÃ¢y hÆ° há»ng thiáº¿t bá»‹

> **[ChÃ¨n hÃ¬nh: Minh há»a Reject Streng]**

---

## Quy trÃ¬nh lÃ m viá»‡c vá»›i Recipe

### BÆ°á»›c 1: Chá»n Recipe

1. Táº¡i dropdown **"Chá»n Recipe"**, click Ä‘á»ƒ xem danh sÃ¡ch
2. Danh sÃ¡ch hiá»ƒn thá»‹ cÃ¡c recipe Ä‘Ã£ lÆ°u (vÃ­ dá»¥: Default, Recipe1, Recipe_SanPhamA, v.v.)
3. Chá»n recipe muá»‘n sá»­ dá»¥ng

**Khi chá»n recipe:**
- Há»‡ thá»‘ng tá»± Ä‘á»™ng load 3 thÃ´ng sá»‘ tá»« file `.rplc`
- Hiá»ƒn thá»‹ lÃªn cÃ¡c Ã´ nháº­p liá»‡u

> **[ChÃ¨n hÃ¬nh: Dropdown chá»n Recipe]**

---

### BÆ°á»›c 2: Xem/Chá»‰nh sá»­a tham sá»‘

Sau khi chá»n recipe, 3 Ã´ nháº­p liá»‡u sáº½ hiá»ƒn thá»‹ giÃ¡ trá»‹:

| Tham sá»‘ | Ã” nháº­p | VÃ­ dá»¥ giÃ¡ trá»‹ |
|---------|--------|---------------|
| **Delay Camera** | ipDelayTriger | 1000 |
| **Delay Reject** | ipDelayReject | 2000 |
| **Reject Streng** | ipRejectStreng | 20 |

**Äá»ƒ chá»‰nh sá»­a:**
1. Click vÃ o Ã´ cáº§n sá»­a
2. Nháº­p giÃ¡ trá»‹ má»›i (chá»‰ nháº­p sá»‘)
3. Kiá»ƒm tra ká»¹ giÃ¡ trá»‹

> **[ChÃ¨n hÃ¬nh: CÃ¡c Ã´ nháº­p tham sá»‘]**

**LÆ°u Ã½:**
- âš ï¸ Chá»‰ nháº­p sá»‘ nguyÃªn dÆ°Æ¡ng
- âš ï¸ KhÃ´ng nháº­p kÃ½ tá»± chá»¯ hoáº·c kÃ½ tá»± Ä‘áº·c biá»‡t
- âš ï¸ Kiá»ƒm tra ká»¹ Ä‘Æ¡n vá»‹ (ms)

---

### BÆ°á»›c 3: LÆ°u Recipe

Sau khi chá»‰nh sá»­a xong, nháº¥n nÃºt **"LÆ°u"** (Save):

**Há»‡ thá»‘ng sáº½ thá»±c hiá»‡n:**

1. **LÆ°u vÃ o file `.rplc`**
   - Vá»‹ trÃ­: `PLC_RECIPEs/[TÃªnRecipe].rplc`
   - Äá»‹nh dáº¡ng: JSON
   - VÃ­ dá»¥:
   ```json
   {
     "DelayCamera": "1000",
     "DelayReject": "2000",
     "RejectStreng": "20"
   }
   ```

2. **Ghi xuá»‘ng PLC**
   - Ghi 3 giÃ¡ trá»‹ vÃ o Ä‘á»‹a chá»‰ DM cá»§a PLC
   - Äá»‹a chá»‰: `PLC_Delay_Camera_DM_C2` (tá»« Google Sheets mapping)
   - PLC nháº­n Ä‘Æ°á»£c vÃ  Ã¡p dá»¥ng ngay láº­p tá»©c

3. **Ghi log**
   - Action: UPDATE
   - RecipeName: TÃªn recipe
   - RecipeValue: "DelayCamera,DelayReject,RejectStreng"
   - Timestamp: Thá»i gian lÆ°u
   - UserName: TÃªn Admin Ä‘ang Ä‘Äƒng nháº­p

**Náº¿u lÆ°u thÃ nh cÃ´ng:**
- âœ… ThÃ´ng bÃ¡o: "LÆ°u cÃ i Ä‘áº·t PLC thÃ nh cÃ´ng!"
- Recipe Ä‘Æ°á»£c cáº­p nháº­t vÃ o file vÃ  PLC
- Log ghi láº¡i: `UA-PLCSETTING-02: LÆ°u recipe [TÃªnRecipe]`

**Náº¿u lÆ°u tháº¥t báº¡i:**
- âŒ ThÃ´ng bÃ¡o: "Lá»—i khi ghi vÃ o PLC: [Chi tiáº¿t lá»—i]"
- CÃ³ thá»ƒ do:
  - PLC máº¥t káº¿t ná»‘i
  - GiÃ¡ trá»‹ nháº­p sai Ä‘á»‹nh dáº¡ng
  - Lá»—i quyá»n ghi file
- Log ghi láº¡i: `ERR-PLCSETTING-01: Lá»—i lÆ°u recipe`

> **[ChÃ¨n hÃ¬nh: NÃºt LÆ°u vÃ  thÃ´ng bÃ¡o thÃ nh cÃ´ng]**

---

### BÆ°á»›c 4: Kiá»ƒm tra káº¿t quáº£

Sau khi lÆ°u, **Báº®T BUá»˜C** pháº£i kiá»ƒm tra:

1. **Kiá»ƒm tra file:**
   - Má»Ÿ thÆ° má»¥c `PLC_RECIPEs/`
   - TÃ¬m file `[TÃªnRecipe].rplc`
   - Má»Ÿ báº±ng Notepad, kiá»ƒm tra giÃ¡ trá»‹ Ä‘Ã£ Ä‘Ãºng chÆ°a

2. **Kiá»ƒm tra PLC:**
   - Quan sÃ¡t váº­n hÃ nh thá»±c táº¿
   - Camera cÃ³ chá»¥p Ä‘Ãºng vá»‹ trÃ­ khÃ´ng?
   - Xi lanh loáº¡i cÃ³ Ä‘áº©y Ä‘Ãºng thá»i Ä‘iá»ƒm khÃ´ng?
   - Sáº£n pháº©m lá»—i cÃ³ bá»‹ loáº¡i háº¿t khÃ´ng?

3. **Äiá»u chá»‰nh náº¿u cáº§n:**
   - Náº¿u chÆ°a chÃ­nh xÃ¡c â†’ Quay láº¡i BÆ°á»›c 2, chá»‰nh láº¡i tham sá»‘
   - LÆ°u láº¡i vÃ  kiá»ƒm tra Ä‘áº¿n khi Ä‘áº¡t yÃªu cáº§u

> **[ChÃ¨n hÃ¬nh: Kiá»ƒm tra file recipe]**

---

## Táº¡o Recipe má»›i

**Khi nÃ o cáº§n táº¡o recipe má»›i?**
- Khi sáº£n xuáº¥t sáº£n pháº©m má»›i vá»›i tá»‘c Ä‘á»™ khÃ¡c
- Khi thay Ä‘á»•i bá»‘ trÃ­ dÃ¢y chuyá»n
- Khi cáº§n lÆ°u nhiá»u cáº¥u hÃ¬nh khÃ¡c nhau

**CÃ¡c bÆ°á»›c:**

1. **Nháº­p tÃªn Recipe má»›i**
   - Táº¡i dropdown "Chá»n Recipe", cÃ³ thá»ƒ nháº­p tÃªn má»›i
   - Hoáº·c dÃ¹ng tÃ­nh nÄƒng "Táº¡o má»›i" (náº¿u cÃ³)

2. **Nháº­p cÃ¡c tham sá»‘**
   - DelayCamera
   - DelayReject
   - RejectStreng

3. **Nháº¥n LÆ°u**
   - Há»‡ thá»‘ng tá»± Ä‘á»™ng táº¡o file `.rplc` má»›i
   - Ghi log action: CREATE
   - Recipe má»›i xuáº¥t hiá»‡n trong dropdown

> **[ChÃ¨n hÃ¬nh: Táº¡o Recipe má»›i]**

**Quy táº¯c Ä‘áº·t tÃªn Recipe:**
- âœ… NÃªn: `Recipe_SanPhamA`, `Recipe_Line3_Fast`, `Default`
- âŒ KhÃ´ng nÃªn: TÃªn cÃ³ khoáº£ng tráº¯ng, kÃ½ tá»± Ä‘áº·c biá»‡t

---

## Quáº£n lÃ½ Recipe CS (Customer Specific)

**Recipe CS** dÃ nh cho cÃ¡c sáº£n pháº©m khÃ¡ch hÃ ng Ä‘áº·c biá»‡t, Ä‘Æ°á»£c lÆ°u riÃªng trong thÆ° má»¥c `PLC_RECIPEs_CS/`

**CÃ¡ch sá»­ dá»¥ng:**
1. Chuyá»ƒn sang **Tab Recipe CS**
2. Thao tÃ¡c tÆ°Æ¡ng tá»± nhÆ° Recipe thÆ°á»ng
3. LÆ°u vÃ o thÆ° má»¥c riÃªng

**LÆ°u Ã½:**
- Recipe CS vÃ  Recipe thÆ°á»ng **hoÃ n toÃ n Ä‘á»™c láº­p**
- CÃ³ thá»ƒ cÃ³ cÃ¹ng tÃªn nhÆ°ng khÃ¡c thÆ° má»¥c
- DÃ¹ng cho sáº£n pháº©m yÃªu cáº§u Ä‘áº·c biá»‡t

> **[ChÃ¨n hÃ¬nh: Tab Recipe CS]**

---

## Xem Monitor Camera

Trang PLC Settings cÃ³ tÃ­ch há»£p **Monitor Camera** Ä‘á»ƒ xem trá»±c tiáº¿p hÃ¬nh áº£nh:

**Chá»©c nÄƒng:**
- Hiá»ƒn thá»‹ WebView káº¿t ná»‘i Ä‘áº¿n Camera
- URL: `http://[Camera_IP]/monitor`
- Xem realtime hÃ¬nh áº£nh camera Ä‘ang chá»¥p

**Má»¥c Ä‘Ã­ch:**
- Kiá»ƒm tra vá»‹ trÃ­ sáº£n pháº©m khi chá»¥p
- Äiá»u chá»‰nh Delay Camera cho chÃ­nh xÃ¡c
- Debug khi cÃ³ váº¥n Ä‘á» vá» áº£nh

> **[ChÃ¨n hÃ¬nh: Monitor Camera trÃªn trang PLC Settings]**

---

## Lá»‹ch sá»­ thay Ä‘á»•i Recipe

Má»i thao tÃ¡c vá»›i Recipe Ä‘á»u Ä‘Æ°á»£c ghi log vÃ o database `log.rlplc`:

**CÃ¡c loáº¡i Action:**
- **CREATE:** Táº¡o recipe má»›i
- **UPDATE:** Cáº­p nháº­t recipe
- **SELECT:** Chá»n recipe Ä‘á»ƒ sá»­ dá»¥ng

**ThÃ´ng tin log:**
- RecipeName: TÃªn recipe
- RecipeValue: "DelayCamera,DelayReject,RejectStreng"
- Action: CREATE/UPDATE/SELECT
- Timestamp: Thá»i gian
- UserName: TÃªn Admin

**Xem lá»‹ch sá»­:**
- Má»Ÿ file `PLC_RECIPEs/log.rlplc` báº±ng SQLite Browser
- Xem báº£ng `Log`
- Lá»c theo RecipeName, Action, hoáº·c UserName

> **[ChÃ¨n hÃ¬nh: Database log recipe]**

---

## Kháº¯c phá»¥c sá»± cá»‘

### Sá»± cá»‘ 1: KhÃ´ng lÆ°u Ä‘Æ°á»£c recipe

**Hiá»‡n tÆ°á»£ng:**
- Nháº¥n "LÆ°u" nhÆ°ng bÃ¡o lá»—i
- ThÃ´ng bÃ¡o: "Lá»—i khi ghi vÃ o PLC"

**NguyÃªn nhÃ¢n:**
- PLC máº¥t káº¿t ná»‘i
- GiÃ¡ trá»‹ nháº­p sai (kÃ½ tá»± chá»¯, sá»‘ Ã¢m)
- Lá»—i quyá»n ghi file

**CÃ¡ch kháº¯c phá»¥c:**
1. Kiá»ƒm tra káº¿t ná»‘i PLC (xem Dashboard)
2. Kiá»ƒm tra giÃ¡ trá»‹ nháº­p (chá»‰ sá»‘ nguyÃªn dÆ°Æ¡ng)
3. Kiá»ƒm tra quyá»n ghi thÆ° má»¥c `PLC_RECIPEs/`

---

### Sá»± cá»‘ 2: Camera chá»¥p sai vá»‹ trÃ­

**Hiá»‡n tÆ°á»£ng:**
- áº¢nh chá»¥p bá»‹ lá»‡ch, khÃ´ng cÃ³ sáº£n pháº©m

**NguyÃªn nhÃ¢n:**
- DelayCamera chÆ°a phÃ¹ há»£p

**CÃ¡ch kháº¯c phá»¥c:**
1. VÃ o PLC Settings
2. Má»Ÿ Monitor Camera Ä‘á»ƒ quan sÃ¡t
3. Äiá»u chá»‰nh DelayCamera:
   - áº¢nh lá»‡ch trÃ¡i (chá»¥p sá»›m) â†’ TÄƒng Delay
   - áº¢nh lá»‡ch pháº£i (chá»¥p muá»™n) â†’ Giáº£m Delay
4. LÆ°u vÃ  kiá»ƒm tra láº¡i

---

### Sá»± cá»‘ 3: Xi lanh loáº¡i khÃ´ng Ä‘Ãºng thá»i Ä‘iá»ƒm

**Hiá»‡n tÆ°á»£ng:**
- Sáº£n pháº©m lá»—i khÃ´ng bá»‹ loáº¡i
- Hoáº·c sáº£n pháº©m tá»‘t bá»‹ loáº¡i nháº§m

**NguyÃªn nhÃ¢n:**
- DelayReject chÆ°a phÃ¹ há»£p

**CÃ¡ch kháº¯c phá»¥c:**
1. Quan sÃ¡t vá»‹ trÃ­ sáº£n pháº©m khi xi lanh kÃ­ch hoáº¡t
2. Äiá»u chá»‰nh DelayReject:
   - Xi lanh Ä‘áº©y sá»›m â†’ TÄƒng Delay
   - Xi lanh Ä‘áº©y muá»™n â†’ Giáº£m Delay
3. LÆ°u vÃ  kiá»ƒm tra láº¡i

---

### Sá»± cá»‘ 4: Sáº£n pháº©m lá»—i khÃ´ng bá»‹ loáº¡i háº¿t

**Hiá»‡n tÆ°á»£ng:**
- Xi lanh Ä‘áº©y nhÆ°ng sáº£n pháº©m khÃ´ng rá»i khá»i bÄƒng táº£i

**NguyÃªn nhÃ¢n:**
- RejectStreng quÃ¡ nhá»

**CÃ¡ch kháº¯c phá»¥c:**
1. TÄƒng giÃ¡ trá»‹ RejectStreng (tá»« 20 lÃªn 30, 40...)
2. LÆ°u vÃ  kiá»ƒm tra
3. TÄƒng dáº§n Ä‘áº¿n khi sáº£n pháº©m bá»‹ loáº¡i háº¿t

**LÆ°u Ã½:**
- KhÃ´ng tÄƒng quÃ¡ cao â†’ Tá»‘n khÃ­ nÃ©n, há»ng thiáº¿t bá»‹

---

## Báº£ng tham kháº£o giÃ¡ trá»‹ Recipe

| Loáº¡i sáº£n pháº©m | Delay Camera (ms) | Delay Reject (ms) | Reject Streng |
|---------------|-------------------|-------------------|---------------|
| Chai nhá», bÄƒng táº£i nhanh | 500-800 | 1500-1800 | 15-20 |
| Chai trung bÃ¬nh | 800-1200 | 1800-2200 | 20-25 |
| Chai lá»›n, bÄƒng táº£i cháº­m | 1200-1500 | 2200-2500 | 25-30 |
| Sáº£n pháº©m Ä‘áº·c biá»‡t (CS) | TÃ¹y chá»‰nh | TÃ¹y chá»‰nh | TÃ¹y chá»‰nh |

**LÆ°u Ã½:**
- ÄÃ¢y chá»‰ lÃ  tham kháº£o
- Cáº§n thá»­ nghiá»‡m thá»±c táº¿ Ä‘á»ƒ tÃ¬m giÃ¡ trá»‹ tá»‘i Æ°u

---

## 4.3. Quáº£n lÃ½ ngÆ°á»i dÃ¹ng (Admin)

> âš ï¸ **PHáº¦N NÃ€Y CHá»ˆ DÃ€NH CHO ADMIN**

### Truy cáº­p trang quáº£n lÃ½ ngÆ°á»i dÃ¹ng

1. ÄÄƒng nháº­p vá»›i tÃ i khoáº£n **Admin**
2. Nháº¥n vÃ o menu **"App Settings"**
3. Chá»n tab **"User Management"** (Tab thá»© 2)
4. MÃ n hÃ¬nh hiá»ƒn thá»‹ 2 pháº§n:
   - **CÃ i Ä‘áº·t cÃ¡ nhÃ¢n** (User Setting) - Äá»•i máº­t kháº©u cá»§a chÃ­nh mÃ¬nh
   - **Quáº£n lÃ½ ngÆ°á»i dÃ¹ng** (User Manager) - Táº¡o, sá»­a, xÃ³a user

> **[ChÃ¨n hÃ¬nh: Tab User Management vá»›i 2 pháº§n]**

---

### 4.3.1. Táº¡o ngÆ°á»i dÃ¹ng má»›i

**Chá»©c nÄƒng:** ThÃªm tÃ i khoáº£n ngÆ°á»i dÃ¹ng má»›i vÃ o há»‡ thá»‘ng

**CÃ¡c bÆ°á»›c:**

#### BÆ°á»›c 1: TÃ¬m pháº§n "Quáº£n lÃ½ ngÆ°á»i dÃ¹ng"

- Táº¡i tab **"User Management"**, tÃ¬m pháº§n **"User Manager"** (pháº§n dÆ°á»›i)
- ÄÃ¢y lÃ  khu vá»±c dÃ nh cho Admin quáº£n lÃ½ táº¥t cáº£ user

> **[ChÃ¨n hÃ¬nh: Pháº§n User Manager]**

#### BÆ°á»›c 2: Nháº­p thÃ´ng tin ngÆ°á»i dÃ¹ng má»›i

Äiá»n Ä‘áº§y Ä‘á»§ cÃ¡c thÃ´ng tin sau:

| TrÆ°á»ng | MÃ´ táº£ | YÃªu cáº§u |
|--------|-------|---------|
| **Username** | TÃªn Ä‘Äƒng nháº­p | Duy nháº¥t, khÃ´ng trÃ¹ng |
| **Password** | Máº­t kháº©u | Tá»‘i thiá»ƒu 6 kÃ½ tá»± |
| **Confirm Password** | XÃ¡c nháº­n máº­t kháº©u | Pháº£i trÃ¹ng vá»›i Password |
| **Full Name** | Há» vÃ  tÃªn Ä‘áº§y Ä‘á»§ | TÃ¹y chá»n |
| **Email** | Email liÃªn há»‡ | TÃ¹y chá»n |
| **Role** | Vai trÃ² | Admin hoáº·c Operator |

> **[ChÃ¨n hÃ¬nh: Form nháº­p thÃ´ng tin user má»›i]**

#### BÆ°á»›c 3: Chá»n vai trÃ² (Role)

**CÃ³ 2 vai trÃ²:**

1. **Admin (Quáº£n LÃ½)**
   - CÃ³ toÃ n quyá»n trÃªn há»‡ thá»‘ng
   - CÃ³ thá»ƒ cáº¥u hÃ¬nh á»©ng dá»¥ng, PLC
   - CÃ³ thá»ƒ quáº£n lÃ½ user khÃ¡c
   - CÃ³ thá»ƒ xem nháº­t kÃ½ hoáº¡t Ä‘á»™ng

2. **Operator (Váº­n HÃ nh)**
   - Chá»‰ cÃ³ quyá»n váº­n hÃ nh sáº£n xuáº¥t
   - KhÃ´ng thá»ƒ cáº¥u hÃ¬nh há»‡ thá»‘ng
   - KhÃ´ng thá»ƒ quáº£n lÃ½ user
   - KhÃ´ng thá»ƒ xem nháº­t kÃ½

**Lá»±a chá»n:**
- Chá»n **"Admin"** tá»« dropdown náº¿u cáº§n cáº¥p quyá»n quáº£n lÃ½
- Chá»n **"Operator"** cho ngÆ°á»i váº­n hÃ nh thÃ´ng thÆ°á»ng

> **[ChÃ¨n hÃ¬nh: Dropdown chá»n Role]**

#### BÆ°á»›c 4: Táº¡o tÃ i khoáº£n

1. Kiá»ƒm tra láº¡i táº¥t cáº£ thÃ´ng tin Ä‘Ã£ nháº­p
2. Nháº¥n nÃºt **"Táº¡o ngÆ°á»i dÃ¹ng"** (Create User)
3. Há»‡ thá»‘ng kiá»ƒm tra:
   - Username cÃ³ trÃ¹ng khÃ´ng?
   - Password vÃ  Confirm Password cÃ³ khá»›p khÃ´ng?
   - CÃ¡c trÆ°á»ng báº¯t buá»™c Ä‘Ã£ Ä‘iá»n chÆ°a?

**Náº¿u thÃ nh cÃ´ng:**
- Hiá»ƒn thá»‹ thÃ´ng bÃ¡o: "Táº¡o ngÆ°á»i dÃ¹ng thÃ nh cÃ´ng!"
- TÃ i khoáº£n má»›i Ä‘Æ°á»£c thÃªm vÃ o danh sÃ¡ch
- Log ghi láº¡i: `UM01: Táº¡o user [username] thÃ nh cÃ´ng`

**Náº¿u tháº¥t báº¡i:**
- Hiá»ƒn thá»‹ thÃ´ng bÃ¡o lá»—i cá»¥ thá»ƒ
- VÃ­ dá»¥: "Username Ä‘Ã£ tá»“n táº¡i", "Máº­t kháº©u khÃ´ng khá»›p"

> **[ChÃ¨n hÃ¬nh: ThÃ´ng bÃ¡o táº¡o user thÃ nh cÃ´ng]**

#### BÆ°á»›c 5: Kiá»ƒm tra danh sÃ¡ch user

- Sau khi táº¡o, tÃ i khoáº£n má»›i sáº½ xuáº¥t hiá»‡n trong **danh sÃ¡ch ngÆ°á»i dÃ¹ng**
- Kiá»ƒm tra thÃ´ng tin hiá»ƒn thá»‹ Ä‘Ãºng khÃ´ng
- Danh sÃ¡ch hiá»ƒn thá»‹: Username, Full Name, Role, Email

> **[ChÃ¨n hÃ¬nh: Danh sÃ¡ch user vá»›i user má»›i Ä‘Æ°á»£c thÃªm]**

---

### 4.3.2. Sá»­a thÃ´ng tin ngÆ°á»i dÃ¹ng

**Chá»©c nÄƒng:** Chá»‰nh sá»­a thÃ´ng tin cá»§a user Ä‘Ã£ tá»“n táº¡i

**CÃ¡c bÆ°á»›c:**

#### BÆ°á»›c 1: Chá»n user cáº§n sá»­a

1. Táº¡i **danh sÃ¡ch ngÆ°á»i dÃ¹ng**, tÃ¬m user cáº§n chá»‰nh sá»­a
2. Click vÃ o dÃ²ng user Ä‘Ã³ Ä‘á»ƒ chá»n
3. ThÃ´ng tin user sáº½ Ä‘Æ°á»£c load lÃªn form

> **[ChÃ¨n hÃ¬nh: Chá»n user tá»« danh sÃ¡ch]**

#### BÆ°á»›c 2: Chá»‰nh sá»­a thÃ´ng tin

CÃ³ thá»ƒ chá»‰nh sá»­a:
- âœ… Full Name (Há» tÃªn)
- âœ… Email
- âœ… Role (Vai trÃ²)
- âœ… Password (Äá»•i máº­t kháº©u)
- âŒ Username (KHÃ”NG thá»ƒ Ä‘á»•i)

**LÆ°u Ã½:**
- Username lÃ  duy nháº¥t vÃ  khÃ´ng thá»ƒ thay Ä‘á»•i
- Náº¿u muá»‘n Ä‘á»•i Password, nháº­p máº­t kháº©u má»›i vÃ o Ã´ "New Password"

> **[ChÃ¨n hÃ¬nh: Form chá»‰nh sá»­a thÃ´ng tin user]**

#### BÆ°á»›c 3: LÆ°u thay Ä‘á»•i

1. Sau khi chá»‰nh sá»­a xong, nháº¥n nÃºt **"Cáº­p nháº­t"** (Update)
2. Há»‡ thá»‘ng xÃ¡c nháº­n:
```
Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n cáº­p nháº­t thÃ´ng tin user [username]?

[XÃ¡c nháº­n]  [Há»§y]
```
3. Nháº¥n **"XÃ¡c nháº­n"**
4. ThÃ´ng tin Ä‘Æ°á»£c cáº­p nháº­t vÃ o database
5. Log ghi láº¡i: `UM01: Cáº­p nháº­t user [username]`

> **[ChÃ¨n hÃ¬nh: Dialog xÃ¡c nháº­n cáº­p nháº­t]**

---

### 4.3.3. XÃ³a ngÆ°á»i dÃ¹ng

**Chá»©c nÄƒng:** XÃ³a tÃ i khoáº£n user khá»i há»‡ thá»‘ng

**CÃ¡c bÆ°á»›c:**

#### BÆ°á»›c 1: Chá»n user cáº§n xÃ³a

1. Táº¡i **danh sÃ¡ch ngÆ°á»i dÃ¹ng**, chá»n user cáº§n xÃ³a
2. Nháº¥n nÃºt **"XÃ³a ngÆ°á»i dÃ¹ng"** (Delete User)

> **[ChÃ¨n hÃ¬nh: NÃºt Delete User]**

#### BÆ°á»›c 2: XÃ¡c nháº­n xÃ³a

Há»‡ thá»‘ng hiá»ƒn thá»‹ cáº£nh bÃ¡o:

```
âš ï¸ Cáº¢NH BÃO
Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n xÃ³a ngÆ°á»i dÃ¹ng [username]?
HÃ nh Ä‘á»™ng nÃ y KHÃ”NG THá»‚ HOÃ€N TÃC!

[XÃ³a]  [Há»§y]
```

**LÆ°u Ã½:**
- âš ï¸ KhÃ´ng thá»ƒ xÃ³a tÃ i khoáº£n Ä‘ang Ä‘Äƒng nháº­p
- âš ï¸ KhÃ´ng thá»ƒ xÃ³a tÃ i khoáº£n Admin cuá»‘i cÃ¹ng (pháº£i cÃ³ Ã­t nháº¥t 1 Admin)
- âš ï¸ HÃ nh Ä‘á»™ng xÃ³a lÃ  vÄ©nh viá»…n, khÃ´ng thá»ƒ khÃ´i phá»¥c

> **[ChÃ¨n hÃ¬nh: Dialog cáº£nh bÃ¡o xÃ³a user]**

#### BÆ°á»›c 3: HoÃ n táº¥t

Náº¿u xÃ¡c nháº­n xÃ³a:
- User bá»‹ xÃ³a khá»i há»‡ thá»‘ng
- User khÃ´ng thá»ƒ Ä‘Äƒng nháº­p ná»¯a
- Log ghi láº¡i: `UM01: XÃ³a user [username]`

---

### 4.3.4. Reset máº­t kháº©u ngÆ°á»i dÃ¹ng

**Khi nÃ o dÃ¹ng:** Khi user quÃªn máº­t kháº©u

**CÃ¡c bÆ°á»›c:**

1. Chá»n user cáº§n reset máº­t kháº©u tá»« danh sÃ¡ch
2. Nháº¥n nÃºt **"Reset Password"**
3. Nháº­p máº­t kháº©u má»›i (2 láº§n Ä‘á»ƒ xÃ¡c nháº­n)
4. Nháº¥n **"XÃ¡c nháº­n"**
5. ThÃ´ng bÃ¡o cho user máº­t kháº©u má»›i

> **[ChÃ¨n hÃ¬nh: Form reset password]**

**LÆ°u Ã½:**
- âš ï¸ Chá»‰ Admin má»›i cÃ³ quyá»n reset password cho user khÃ¡c
- âš ï¸ Máº­t kháº©u má»›i pháº£i tá»‘i thiá»ƒu 6 kÃ½ tá»±
- âš ï¸ User nÃªn Ä‘á»•i láº¡i máº­t kháº©u ngay sau khi Ä‘Äƒng nháº­p

---

### 4.3.5. Xem log hoáº¡t Ä‘á»™ng cá»§a user

Táº¡i pháº§n dÆ°á»›i cÃ¹ng cá»§a mÃ n hÃ¬nh cÃ³ **ListBox hiá»ƒn thá»‹ log** realtime:

**CÃ¡c sá»± kiá»‡n Ä‘Æ°á»£c log:**
- Táº¡o user má»›i
- Cáº­p nháº­t thÃ´ng tin user
- XÃ³a user
- Reset password
- Äá»•i password

**Äá»‹nh dáº¡ng log:**
```
[10:30:15] Táº¡o user 'nguyenvana' thÃ nh cÃ´ng
[10:31:20] Cáº­p nháº­t user 'tranthib' - Äá»•i role thÃ nh Admin
[10:32:45] XÃ³a user 'hoangvanc'
```

> **[ChÃ¨n hÃ¬nh: ListBox hiá»ƒn thá»‹ log hoáº¡t Ä‘á»™ng]**

---

## 4.4. Äá»•i máº­t kháº©u

**Chá»©c nÄƒng:** Cho phÃ©p ngÆ°á»i dÃ¹ng (cáº£ Admin vÃ  Operator) Ä‘á»•i máº­t kháº©u cá»§a chÃ­nh mÃ¬nh

### Truy cáº­p trang Ä‘á»•i máº­t kháº©u

1. ÄÄƒng nháº­p vÃ o há»‡ thá»‘ng
2. Nháº¥n vÃ o menu **"App Settings"**
3. Chá»n tab **"User Management"**
4. TÃ¬m pháº§n **"CÃ i Ä‘áº·t cÃ¡ nhÃ¢n"** (User Setting) - pháº§n trÃªn

> **[ChÃ¨n hÃ¬nh: Pháº§n User Setting]**

---

### CÃ¡c bÆ°á»›c Ä‘á»•i máº­t kháº©u

#### BÆ°á»›c 1: XÃ¡c nháº­n thÃ´ng tin hiá»‡n táº¡i

Pháº§n "User Setting" hiá»ƒn thá»‹ thÃ´ng tin cá»§a user Ä‘ang Ä‘Äƒng nháº­p:
- Username
- Full Name
- Email
- Role

**Kiá»ƒm tra xem Ä‘Ã¢y cÃ³ pháº£i lÃ  tÃ i khoáº£n cá»§a báº¡n khÃ´ng.**

> **[ChÃ¨n hÃ¬nh: ThÃ´ng tin user hiá»‡n táº¡i]**

#### BÆ°á»›c 2: Nháº­p máº­t kháº©u cÅ©

1. TÃ¬m Ã´ **"Máº­t kháº©u hiá»‡n táº¡i"** (Current Password)
2. Nháº­p máº­t kháº©u Ä‘ang sá»­ dá»¥ng
3. KÃ½ tá»± sáº½ hiá»ƒn thá»‹ dáº¡ng â— Ä‘á»ƒ báº£o máº­t

> **[ChÃ¨n hÃ¬nh: Ã” nháº­p máº­t kháº©u hiá»‡n táº¡i]**

**LÆ°u Ã½:**
- âš ï¸ Pháº£i nháº­p Ä‘Ãºng máº­t kháº©u hiá»‡n táº¡i
- âš ï¸ Náº¿u sai máº­t kháº©u â†’ Há»‡ thá»‘ng sáº½ bÃ¡o lá»—i

#### BÆ°á»›c 3: Nháº­p máº­t kháº©u má»›i

1. TÃ¬m Ã´ **"Máº­t kháº©u má»›i"** (New Password)
2. Nháº­p máº­t kháº©u má»›i mong muá»‘n

**YÃªu cáº§u máº­t kháº©u má»›i:**
- Tá»‘i thiá»ƒu 6 kÃ½ tá»±
- NÃªn sá»­ dá»¥ng káº¿t há»£p chá»¯ HOA, chá»¯ thÆ°á»ng, sá»‘, kÃ½ tá»± Ä‘áº·c biá»‡t
- KhÃ´ng nÃªn dÃ¹ng máº­t kháº©u quÃ¡ Ä‘Æ¡n giáº£n (123456, password, v.v.)

> **[ChÃ¨n hÃ¬nh: Ã” nháº­p máº­t kháº©u má»›i]**

#### BÆ°á»›c 4: XÃ¡c nháº­n máº­t kháº©u má»›i

1. TÃ¬m Ã´ **"XÃ¡c nháº­n máº­t kháº©u má»›i"** (Confirm New Password)
2. Nháº­p láº¡i máº­t kháº©u má»›i (pháº£i giá»‘ng BÆ°á»›c 3)

**Má»¥c Ä‘Ã­ch:** Äáº£m báº£o báº¡n khÃ´ng nháº­p nháº§m máº­t kháº©u

> **[ChÃ¨n hÃ¬nh: Ã” xÃ¡c nháº­n máº­t kháº©u má»›i]**

#### BÆ°á»›c 5: Äá»•i máº­t kháº©u

1. Kiá»ƒm tra láº¡i táº¥t cáº£ 3 Ã´:
   - Máº­t kháº©u hiá»‡n táº¡i (Ä‘Ãºng khÃ´ng?)
   - Máº­t kháº©u má»›i (Ä‘á»§ máº¡nh khÃ´ng?)
   - XÃ¡c nháº­n máº­t kháº©u má»›i (khá»›p khÃ´ng?)
2. Nháº¥n nÃºt **"Äá»•i máº­t kháº©u"** (Change Password)

> **[ChÃ¨n hÃ¬nh: NÃºt Äá»•i máº­t kháº©u]**

#### BÆ°á»›c 6: XÃ¡c nháº­n vÃ  hoÃ n táº¥t

Há»‡ thá»‘ng kiá»ƒm tra:
- âœ… Máº­t kháº©u hiá»‡n táº¡i cÃ³ Ä‘Ãºng khÃ´ng?
- âœ… Máº­t kháº©u má»›i cÃ³ Ä‘á»§ Ä‘iá»u kiá»‡n khÃ´ng?
- âœ… Máº­t kháº©u má»›i vÃ  xÃ¡c nháº­n cÃ³ khá»›p khÃ´ng?

**Náº¿u táº¥t cáº£ OK:**
```
âœ… Äá»•i máº­t kháº©u thÃ nh cÃ´ng!
Vui lÃ²ng Ä‘Äƒng nháº­p láº¡i vá»›i máº­t kháº©u má»›i.
```

**Náº¿u cÃ³ lá»—i:**
- ğŸ”´ "Máº­t kháº©u hiá»‡n táº¡i khÃ´ng Ä‘Ãºng"
- ğŸ”´ "Máº­t kháº©u má»›i quÃ¡ ngáº¯n (tá»‘i thiá»ƒu 6 kÃ½ tá»±)"
- ğŸ”´ "Máº­t kháº©u má»›i vÃ  xÃ¡c nháº­n khÃ´ng khá»›p"

> **[ChÃ¨n hÃ¬nh: ThÃ´ng bÃ¡o Ä‘á»•i máº­t kháº©u thÃ nh cÃ´ng]**

#### BÆ°á»›c 7: ÄÄƒng nháº­p láº¡i

Sau khi Ä‘á»•i máº­t kháº©u thÃ nh cÃ´ng:
1. Há»‡ thá»‘ng sáº½ tá»± Ä‘á»™ng Ä‘Äƒng xuáº¥t
2. Báº¡n cáº§n Ä‘Äƒng nháº­p láº¡i báº±ng máº­t kháº©u má»›i
3. LÆ°u máº­t kháº©u má»›i cáº©n tháº­n

**LÆ°u Ã½:**
- âš ï¸ Náº¿u quÃªn máº­t kháº©u má»›i, liÃªn há»‡ Admin Ä‘á»ƒ reset
- âš ï¸ KhÃ´ng chia sáº» máº­t kháº©u cho ngÆ°á»i khÃ¡c
- âš ï¸ NÃªn Ä‘á»•i máº­t kháº©u Ä‘á»‹nh ká»³ (3-6 thÃ¡ng/láº§n)

---

### CÃ¡c lá»—i thÆ°á»ng gáº·p khi Ä‘á»•i máº­t kháº©u

| Lá»—i | NguyÃªn nhÃ¢n | CÃ¡ch kháº¯c phá»¥c |
|-----|-------------|----------------|
| "Máº­t kháº©u hiá»‡n táº¡i khÃ´ng Ä‘Ãºng" | Nháº­p sai máº­t kháº©u cÅ© | Kiá»ƒm tra láº¡i, thá»­ nháº­p cháº­m hÆ¡n |
| "Máº­t kháº©u má»›i quÃ¡ ngáº¯n" | Máº­t kháº©u < 6 kÃ½ tá»± | Nháº­p máº­t kháº©u dÃ i hÆ¡n |
| "Máº­t kháº©u khÃ´ng khá»›p" | New Password â‰  Confirm | Nháº­p láº¡i cho khá»›p |
| "Máº­t kháº©u má»›i trÃ¹ng vá»›i cÅ©" | DÃ¹ng láº¡i máº­t kháº©u cÅ© | Äá»•i sang máº­t kháº©u khÃ¡c |

---

### Máº¹o báº£o máº­t máº­t kháº©u

âœ… **NÃŠN:**
- DÃ¹ng máº­t kháº©u dÃ i (Ã­t nháº¥t 8-12 kÃ½ tá»±)
- Káº¿t há»£p chá»¯ HOA, chá»¯ thÆ°á»ng, sá»‘, kÃ½ tá»± Ä‘áº·c biá»‡t
- VÃ­ dá»¥: `VanHanh@2025`, `Admin#Line3`
- Äá»•i máº­t kháº©u Ä‘á»‹nh ká»³
- LÆ°u máº­t kháº©u á»Ÿ nÆ¡i an toÃ n

âŒ **KHÃ”NG NÃŠN:**
- DÃ¹ng máº­t kháº©u quÃ¡ Ä‘Æ¡n giáº£n: `123456`, `password`, `admin`
- DÃ¹ng tÃªn, ngÃ y sinh, sá»‘ Ä‘iá»‡n thoáº¡i
- Chia sáº» máº­t kháº©u cho ngÆ°á»i khÃ¡c
- Ghi máº­t kháº©u trÃªn giáº¥y dÃ¡n mÃ n hÃ¬nh
- DÃ¹ng chung 1 máº­t kháº©u cho nhiá»u há»‡ thá»‘ng

---

## 4.5. Xem nháº­t kÃ½ hoáº¡t Ä‘á»™ng

### Truy cáº­p trang Activity Logs

1. ÄÄƒng nháº­p vá»›i tÃ i khoáº£n **Admin**
2. Nháº¥n vÃ o menu **"Activity Logs"**
3. MÃ n hÃ¬nh hiá»ƒn thá»‹ danh sÃ¡ch log

> **[ChÃ¨n hÃ¬nh: Menu Activity Logs]**

### CÃ¡c loáº¡i log

| Loáº¡i | MÃ u | MÃ´ táº£ |
|------|-----|-------|
| **Info** | Xanh | ThÃ´ng tin chung |
| **Warning** | VÃ ng | Cáº£nh bÃ¡o |
| **Error** | Äá» | Lá»—i há»‡ thá»‘ng |
| **UserAction** | Xanh dÆ°Æ¡ng | Thao tÃ¡c ngÆ°á»i dÃ¹ng |
| **DeviceAction** | TÃ­m | Thao tÃ¡c thiáº¿t bá»‹ |
| **DataChange** | Cam | Thay Ä‘á»•i dá»¯ liá»‡u |
| **Critical** | Äá» Ä‘áº­m | NghiÃªm trá»ng |

### Bá»™ lá»c

#### 1. Lá»c theo loáº¡i log

1. Click vÃ o dropdown **"Loáº¡i log"**
2. Chá»n loáº¡i cáº§n xem
3. Danh sÃ¡ch tá»± Ä‘á»™ng cáº­p nháº­t

> **[ChÃ¨n hÃ¬nh: Dropdown loáº¡i log]**

#### 2. Lá»c theo ngÃ y

1. Chá»n **"Tá»« ngÃ y"** (date picker)
2. Chá»n **"Äáº¿n ngÃ y"** (date picker)
3. Nháº¥n nÃºt **"Lá»c"**

> **[ChÃ¨n hÃ¬nh: Date picker lá»c theo ngÃ y]**

#### 3. Lá»c theo ngÆ°á»i dÃ¹ng

1. Nháº­p tÃªn ngÆ°á»i dÃ¹ng vÃ o Ã´ **"TÃ¬m kiáº¿m"**
2. Nháº¥n **Enter** hoáº·c nÃºt **"TÃ¬m"**

### PhÃ¢n trang

- Hiá»ƒn thá»‹ **50 log/trang**
- NÃºt **"Trang trÆ°á»›c"** / **"Trang sau"**
- Hiá»ƒn thá»‹: "Trang 1 / 10"

> **[ChÃ¨n hÃ¬nh: Thanh phÃ¢n trang]**

### Export ra CSV

1. Sau khi lá»c xong
2. Nháº¥n nÃºt **"Export CSV"**
3. Chá»n vá»‹ trÃ­ lÆ°u file
4. File CSV Ä‘Æ°á»£c táº¡o vá»›i Ä‘á»‹nh dáº¡ng:

```csv
Timestamp,LogType,User,Message,Code
2025-11-28 10:30:15.123,UserAction,admin,ÄÄƒng nháº­p thÃ nh cÃ´ng,UA-LOGIN-01
2025-11-28 10:31:22.456,UserAction,admin,Äá»•i lÃ´ thÃ nh cÃ´ng,UA-F-02
```

> **[ChÃ¨n hÃ¬nh: NÃºt Export CSV vÃ  file CSV máº«u]**

---

# PHáº¦N 5: Xá»¬ LÃ Sá»° Cá» THÆ¯á»œNG Gáº¶P

## 5.1. Sá»± cá»‘ PLC máº¥t káº¿t ná»‘i

**Hiá»‡n tÆ°á»£ng:**
- LED PLC sÃ¡ng Ä‘á»
- Tráº¡ng thÃ¡i: "Máº¥t káº¿t ná»‘i"

**NguyÃªn nhÃ¢n:**
- DÃ¢y máº¡ng bá»‹ rÃºt
- PLC bá»‹ táº¯t nguá»“n
- IP/Port cáº¥u hÃ¬nh sai
- Network switch bá»‹ lá»—i

**CÃ¡ch xá»­ lÃ½:**

1. **Kiá»ƒm tra dÃ¢y máº¡ng:**
   - Kiá»ƒm tra dÃ¢y Ethernet cÃ³ cáº¯m cháº¯c khÃ´ng
   - Kiá»ƒm tra Ä‘Ã¨n LED trÃªn card máº¡ng (pháº£i nháº¥p nhÃ¡y)

2. **Kiá»ƒm tra nguá»“n PLC:**
   - Äáº£m báº£o PLC Ä‘Ã£ Ä‘Æ°á»£c cáº¥p nguá»“n
   - ÄÃ¨n trÃªn PLC pháº£i sÃ¡ng

3. **Ping thá»­ PLC:**
   - Má»Ÿ Command Prompt (cmd)
   - GÃµ: `ping 192.168.250.1`
   - Náº¿u thÃ nh cÃ´ng â†’ Váº¥n Ä‘á» á»Ÿ pháº§n má»m
   - Náº¿u tháº¥t báº¡i â†’ Váº¥n Ä‘á» á»Ÿ máº¡ng

4. **Kiá»ƒm tra cáº¥u hÃ¬nh IP:**
   - VÃ o **App Settings**
   - Kiá»ƒm tra `PLC_IP` vÃ  `PLC_Port`
   - Äáº£m báº£o Ä‘Ãºng vá»›i thá»±c táº¿

5. **Khá»Ÿi Ä‘á»™ng láº¡i káº¿t ná»‘i:**
   - Táº¯t pháº§n má»m
   - Báº­t láº¡i pháº§n má»m
   - Há»‡ thá»‘ng tá»± káº¿t ná»‘i láº¡i

**Náº¿u váº«n khÃ´ng Ä‘Æ°á»£c â†’ LiÃªn há»‡ ká»¹ thuáº­t viÃªn**

---

## 5.2. Sá»± cá»‘ Camera khÃ´ng nháº­n dá»¯ liá»‡u

**Hiá»‡n tÆ°á»£ng:**
- LED Camera sÃ¡ng Ä‘á»
- KhÃ´ng cÃ³ mÃ£ QR nÃ o Ä‘Æ°á»£c quÃ©t
- Bá»™ Ä‘áº¿m Camera khÃ´ng tÄƒng

**NguyÃªn nhÃ¢n:**
- Camera máº¥t nguá»“n
- DÃ¢y máº¡ng bá»‹ rÃºt
- IP/Port cáº¥u hÃ¬nh sai
- Camera bá»‹ lá»—i pháº§n cá»©ng

**CÃ¡ch xá»­ lÃ½:**

1. **Kiá»ƒm tra nguá»“n Camera:**
   - Äáº£m báº£o Camera Ä‘Ã£ Ä‘Æ°á»£c cáº¥p nguá»“n
   - ÄÃ¨n LED trÃªn Camera pháº£i sÃ¡ng

2. **Kiá»ƒm tra dÃ¢y máº¡ng:**
   - Kiá»ƒm tra dÃ¢y Ethernet cÃ³ cáº¯m cháº¯c khÃ´ng

3. **Ping thá»­ Camera:**
   - Má»Ÿ Command Prompt (cmd)
   - GÃµ: `ping [Camera_IP]`
   - VÃ­ dá»¥: `ping 127.0.0.1`

4. **Kiá»ƒm tra cáº¥u hÃ¬nh:**
   - VÃ o **App Settings**
   - Kiá»ƒm tra `Camera_01_IP` vÃ  `Camera_01_Port`

5. **Khá»Ÿi Ä‘á»™ng láº¡i pháº§n má»m:**
   - Táº¯t vÃ  báº­t láº¡i pháº§n má»m

**Náº¿u váº«n khÃ´ng Ä‘Æ°á»£c â†’ LiÃªn há»‡ ká»¹ thuáº­t viÃªn**

---

## 5.3. Sá»± cá»‘ mÃ£ QR bá»‹ trÃ¹ng láº·p

**Hiá»‡n tÆ°á»£ng:**
- Nhiá»u mÃ£ bá»‹ bÃ¡o "Duplicate"
- Bá»™ Ä‘áº¿m Fail tÄƒng cao

**NguyÃªn nhÃ¢n:**
- Sáº£n pháº©m Ä‘i qua camera nhiá»u láº§n
- BÄƒng táº£i bá»‹ táº¯c, sáº£n pháº©m Ä‘i cháº­m
- Camera quÃ©t nháº§m sáº£n pháº©m Ä‘Ã£ qua

**CÃ¡ch xá»­ lÃ½:**

1. **Kiá»ƒm tra bÄƒng táº£i:**
   - Äáº£m báº£o bÄƒng táº£i cháº¡y Ä‘á»u
   - KhÃ´ng cÃ³ sáº£n pháº©m bá»‹ táº¯c

2. **Kiá»ƒm tra tá»‘c Ä‘á»™:**
   - Náº¿u bÄƒng táº£i cháº¡y quÃ¡ cháº­m â†’ Sáº£n pháº©m cÃ³ thá»ƒ bá»‹ quÃ©t nhiá»u láº§n

3. **Kiá»ƒm tra vá»‹ trÃ­ Camera:**
   - Camera pháº£i Ä‘áº·t Ä‘Ãºng vá»‹ trÃ­
   - Má»—i sáº£n pháº©m chá»‰ Ä‘i qua 1 láº§n

4. **Náº¿u cá»‘ Ã½ quÃ©t láº¡i:**
   - MÃ£ sáº½ bá»‹ reject (Ä‘Ãºng nhÆ° thiáº¿t káº¿)
   - Há»‡ thá»‘ng chá»‰ cháº¥p nháº­n mÃ£ unique

---

## 5.4. Sá»± cá»‘ mÃ£ QR sai Ä‘á»‹nh dáº¡ng

**Hiá»‡n tÆ°á»£ng:**
- Nhiá»u mÃ£ bá»‹ bÃ¡o "Format Error"
- Status hiá»ƒn thá»‹ "Lá»—i Ä‘á»‹nh dáº¡ng"

**NguyÃªn nhÃ¢n:**
- MÃ£ QR bá»‹ má», camera Ä‘á»c sai
- MÃ£ QR khÃ´ng Ä‘Ãºng chuáº©n (< 16 kÃ½ tá»±)
- MÃ£ khÃ´ng chá»©a Barcode sáº£n pháº©m

**CÃ¡ch xá»­ lÃ½:**

1. **Kiá»ƒm tra cháº¥t lÆ°á»£ng in:**
   - Äáº£m báº£o mÃ£ QR in rÃµ nÃ©t
   - KhÃ´ng bá»‹ nhÃ²e, má»

2. **Kiá»ƒm tra Camera:**
   - Lau á»‘ng kÃ­nh Camera
   - Äáº£m báº£o Ã¡nh sÃ¡ng Ä‘á»§

3. **Kiá»ƒm tra Ä‘á»‹nh dáº¡ng mÃ£:**
   - MÃ£ pháº£i cÃ³ Ä‘á»™ dÃ i â‰¥ 16 kÃ½ tá»±
   - MÃ£ pháº£i chá»©a Barcode cá»§a sáº£n pháº©m

4. **Kiá»ƒm tra Barcode:**
   - VÃ o Dashboard â†’ Xem Barcode hiá»‡n táº¡i
   - Äáº£m báº£o Ä‘Ãºng vá»›i sáº£n pháº©m Ä‘ang cháº¡y

---

## 5.5. Sá»± cá»‘ khÃ´ng thá»ƒ Ä‘á»•i lÃ´

**Hiá»‡n tÆ°á»£ng:**
- NÃºt "Äá»•i LÃ´" khÃ´ng hoáº¡t Ä‘á»™ng
- Hiá»ƒn thá»‹ lá»—i khi Ä‘á»•i lÃ´

**NguyÃªn nhÃ¢n:**
- KhÃ´ng cÃ³ quyá»n (Operator cÃ³ thá»ƒ bá»‹ giá»›i háº¡n)
- KhÃ´ng káº¿t ná»‘i Ä‘Æ°á»£c Google Sheets (náº¿u dÃ¹ng ERP)
- ThÃ´ng tin nháº­p sai

**CÃ¡ch xá»­ lÃ½:**

1. **Kiá»ƒm tra quyá»n:**
   - Äáº£m báº£o Ä‘Äƒng nháº­p vá»›i tÃ i khoáº£n cÃ³ quyá»n

2. **Kiá»ƒm tra káº¿t ná»‘i Internet:**
   - Náº¿u dÃ¹ng cháº¿ Ä‘á»™ Load ERP â†’ Cáº§n Internet
   - Náº¿u khÃ´ng cÃ³ Internet â†’ DÃ¹ng cháº¿ Ä‘á»™ nháº­p thá»§ cÃ´ng

3. **Kiá»ƒm tra thÃ´ng tin nháº­p:**
   - BatchCode khÃ´ng Ä‘Æ°á»£c Ä‘á»ƒ trá»‘ng
   - Barcode pháº£i há»£p lá»‡

4. **Thá»­ khá»Ÿi Ä‘á»™ng láº¡i pháº§n má»m**

---

## 5.6. Sá»± cá»‘ database bá»‹ lá»—i

**Hiá»‡n tÆ°á»£ng:**
- Pháº§n má»m bÃ¡o lá»—i database
- KhÃ´ng lÆ°u Ä‘Æ°á»£c dá»¯ liá»‡u

**NguyÃªn nhÃ¢n:**
- File database bá»‹ corrupt
- á»” cá»©ng Ä‘áº§y
- Quyá»n truy cáº­p bá»‹ tá»« chá»‘i

**CÃ¡ch xá»­ lÃ½:**

1. **Kiá»ƒm tra dung lÆ°á»£ng á»• cá»©ng:**
   - Äáº£m báº£o á»• C: cÃ²n Ã­t nháº¥t 10GB trá»‘ng

2. **Kiá»ƒm tra quyá»n:**
   - Cháº¡y pháº§n má»m vá»›i quyá»n Administrator

3. **Backup vÃ  khÃ´i phá»¥c:**
   - Thá»±c hiá»‡n backup database (xem bÃªn dÆ°á»›i)
   - Náº¿u cáº§n, restore tá»« báº£n backup cÅ©

4. **LiÃªn há»‡ ká»¹ thuáº­t viÃªn** Ä‘á»ƒ kiá»ƒm tra file database

---

## 5.7. Backup vÃ  khÃ´i phá»¥c dá»¯ liá»‡u

### Backup thá»§ cÃ´ng

**Vá»‹ trÃ­ database:**
```
C:\MASAN\
  â”œâ”€â”€ QRDatabase.db          (Database chÃ­nh)
  â”œâ”€â”€ ActiveUnique.db        (Database unique)
  â””â”€â”€ Database\
      â””â”€â”€ Production\
          â””â”€â”€ batch_history.db   (Lá»‹ch sá»­ lÃ´)
```

**CÃ¡c bÆ°á»›c backup:**

1. Táº¯t pháº§n má»m TApp
2. Má»Ÿ File Explorer
3. Duyá»‡t Ä‘áº¿n `C:\MASAN\`
4. Copy toÃ n bá»™ thÆ° má»¥c `MASAN` ra á»• USB hoáº·c thÆ° má»¥c backup
5. Äáº·t tÃªn theo ngÃ y: `MASAN_Backup_2025-11-28`

> **[ChÃ¨n hÃ¬nh: ThÆ° má»¥c MASAN vá»›i cÃ¡c file DB]**

### KhÃ´i phá»¥c tá»« backup

**CÃ¡c bÆ°á»›c:**

1. Táº¯t pháº§n má»m TApp
2. Má»Ÿ thÆ° má»¥c backup
3. Copy toÃ n bá»™ ná»™i dung vÃ o `C:\MASAN\`
4. XÃ¡c nháº­n ghi Ä‘Ã¨ file
5. Khá»Ÿi Ä‘á»™ng láº¡i pháº§n má»m

**LÆ°u Ã½:**
- âš ï¸ Chá»‰ khÃ´i phá»¥c khi cáº§n thiáº¿t
- âš ï¸ Dá»¯ liá»‡u sau thá»i Ä‘iá»ƒm backup sáº½ bá»‹ máº¥t
- âš ï¸ NÃªn backup Ä‘á»‹nh ká»³ hÃ ng tuáº§n

---

## 5.8. LiÃªn há»‡ há»— trá»£

Khi gáº·p sá»± cá»‘ khÃ´ng thá»ƒ tá»± xá»­ lÃ½, vui lÃ²ng liÃªn há»‡:

**Bá»™ pháº­n IT/Ká»¹ thuáº­t:**
- Äiá»‡n thoáº¡i: [Sá»‘ Ä‘iá»‡n thoáº¡i]
- Email: [Email há»— trá»£]

**ThÃ´ng tin cáº§n cung cáº¥p:**
1. MÃ´ táº£ sá»± cá»‘ chi tiáº¿t
2. Thá»i gian xáº£y ra sá»± cá»‘
3. Screenshot mÃ n hÃ¬nh lá»—i (náº¿u cÃ³)
4. File log (náº¿u yÃªu cáº§u)

**Vá»‹ trÃ­ file log:**
```
C:\Users\[Username]\AppData\Local\TApp\Logs\
```

---

# PHá»¤ Lá»¤C

## A. CÃ¡c mÃ£ lá»—i thÆ°á»ng gáº·p

| MÃ£ lá»—i | Ã nghÄ©a | CÃ¡ch xá»­ lÃ½ |
|--------|---------|-----------|
| **UA-LOGIN-01** | ÄÄƒng nháº­p thÃ nh cÃ´ng | (KhÃ´ng pháº£i lá»—i) |
| **ERR-LOGIN-01** | ÄÄƒng nháº­p tháº¥t báº¡i | Kiá»ƒm tra username/password |
| **INFO-FDASH-01** | Camera init OK | (KhÃ´ng pháº£i lá»—i) |
| **ERR-FDASH-01** | Camera init fail | Kiá»ƒm tra káº¿t ná»‘i Camera |
| **ERP-F-01** | Táº£i ERP tháº¥t báº¡i | Kiá»ƒm tra Internet, Google Sheets |
| **K01** | PLC máº¥t káº¿t ná»‘i | Kiá»ƒm tra PLC |
| **K02** | Camera máº¥t káº¿t ná»‘i | Kiá»ƒm tra Camera |

---

## B. PhÃ­m táº¯t

| PhÃ­m | Chá»©c nÄƒng |
|------|-----------|
| **Enter** | XÃ¡c nháº­n / ThÃªm mÃ£ QR |
| **Esc** | Há»§y / ÄÃ³ng dialog |
| **Ctrl + S** | LÆ°u cáº¥u hÃ¬nh |

---

## C. Thuáº­t ngá»¯

| Thuáº­t ngá»¯ | Ã nghÄ©a |
|-----------|---------|
| **BatchCode** | MÃ£ lÃ´ sáº£n xuáº¥t |
| **Barcode** | MÃ£ váº¡ch sáº£n pháº©m |
| **QR Content** | Ná»™i dung mÃ£ QR |
| **ActiveSet** | Táº­p há»£p mÃ£ Ä‘ang hoáº¡t Ä‘á»™ng trong RAM |
| **Queue** | HÃ ng Ä‘á»£i xá»­ lÃ½ |
| **PLC** | Programmable Logic Controller |
| **HMI** | Human Machine Interface |
| **DM** | Data Memory (bá»™ nhá»› PLC) |
| **ERP** | Enterprise Resource Planning |
| **2FA** | Two-Factor Authentication |

---

# Káº¾T LUáº¬N

TÃ i liá»‡u nÃ y cung cáº¥p Ä‘áº§y Ä‘á»§ thÃ´ng tin vá» cÃ¡ch sá»­ dá»¥ng Há»‡ Thá»‘ng Quáº£n LÃ½ Sáº£n Xuáº¥t & KÃ­ch Hoáº¡t MÃ£ QR. Äá»ƒ há»‡ thá»‘ng hoáº¡t Ä‘á»™ng tá»‘i Æ°u, vui lÃ²ng:

âœ… Äá»c ká»¹ vÃ  tuÃ¢n thá»§ cÃ¡c hÆ°á»›ng dáº«n an toÃ n
âœ… Thá»±c hiá»‡n Ä‘Ãºng quy trÃ¬nh váº­n hÃ nh
âœ… Kiá»ƒm tra thÆ°á»ng xuyÃªn tráº¡ng thÃ¡i thiáº¿t bá»‹
âœ… Backup dá»¯ liá»‡u Ä‘á»‹nh ká»³
âœ… BÃ¡o cÃ¡o ngay khi phÃ¡t hiá»‡n báº¥t thÆ°á»ng

**ChÃºc báº¡n váº­n hÃ nh hiá»‡u quáº£!**

---

*TÃ i liá»‡u nÃ y Ä‘Æ°á»£c biÃªn soáº¡n dá»±a trÃªn phiÃªn báº£n pháº§n má»m hiá»‡n táº¡i. CÃ³ thá»ƒ cÃ³ sá»± thay Ä‘á»•i trong cÃ¡c phiÃªn báº£n sau.*

*Láº§n cáº­p nháº­t cuá»‘i: ThÃ¡ng 11 nÄƒm 2025*


##Phá»¥ lá»¥c##
  2. Logic hoáº¡t Ä‘á»™ng má»›i:

  | Cloud_Connection_Enabled | Cloud_Upload_Enabled | Local_Backup_Enabled | Káº¿t quáº£                                  |
  |--------------------------|----------------------|----------------------|------------------------------------------|
  | false                    | -                    | -                    | âŒ KhÃ´ng cháº¡y gÃ¬ cáº£                       |
  | true                     | true                 | true                 | âœ… Upload cloud + Backup local            |
  | true                     | true                 | false                | âœ… Upload cloud, âŒ KhÃ´ng backup local     |
  | true                     | false                | true                 | âŒ KhÃ´ng upload cloud, âœ… Chá»‰ backup local |
  | true                     | false                | false                | âš ï¸ Export CSV táº¡m nhÆ°ng khÃ´ng lÆ°u gÃ¬     |

  3. Chi tiáº¿t cÆ¡ cháº¿:

  Khi Cloud_Upload_Enabled = true:
  - Upload lÃªn Google Cloud Storage
  - Náº¿u thÃ nh cÃ´ng â†’ Cáº­p nháº­t TimeUnixQR Ä‘á»ƒ trÃ¡nh upload láº¡i
  - Náº¿u tháº¥t báº¡i â†’ Giá»¯ nguyÃªn TimeUnixQR, láº§n sau retry

  Khi Cloud_Upload_Enabled = false:
  - KhÃ´ng upload cloud
  - Coi nhÆ° "thÃ nh cÃ´ng" Ä‘á»ƒ tiáº¿p tá»¥c backup local
  - Log: "Cloud upload bá»‹ táº¯t"
  - Váº«n cáº­p nháº­t TimeUnixQR Ä‘á»ƒ khÃ´ng xá»­ lÃ½ láº¡i dá»¯ liá»‡u cÅ©

  Khi Local_Backup_Enabled = true:
  - Backup file CSV vÃ o C:/MASAN/Backup/
  - Chá»‰ backup khi upload thÃ nh cÃ´ng (hoáº·c khÃ´ng cáº§n upload)

  File táº¡m:
  - LuÃ´n xÃ³a file táº¡m trong C:/MASAN/Temp/ sau khi xá»­ lÃ½ xong