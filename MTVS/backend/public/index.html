<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MTVS Admin - Quản lý Phiên bản</title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h1><i class="fas fa-cube"></i> MTVS Admin</h1>
                <p class="subtitle">Version Manager</p>
            </div>
            <nav class="sidebar-nav">
                <a href="#" class="nav-item active" data-page="releases">
                    <i class="fas fa-box"></i> Releases
                </a>
                <a href="#" class="nav-item" data-page="clients">
                    <i class="fas fa-desktop"></i> Clients
                </a>
                <a href="#" class="nav-item" data-page="backups">
                    <i class="fas fa-database"></i> Backups
                </a>
                <a href="#" class="nav-item" data-page="events">
                    <i class="fas fa-history"></i> Events
                </a>
                <a href="#" class="nav-item" data-page="stats">
                    <i class="fas fa-chart-bar"></i> Statistics
                </a>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="header">
                <h2 id="page-title">Releases</h2>
                <div class="header-actions">
                    <button class="btn btn-primary" id="btn-new-release">
                        <i class="fas fa-plus"></i> New Release
                    </button>
                </div>
            </header>

            <!-- Releases Page -->
            <div id="page-releases" class="page active">
                <div class="filters">
                    <input type="text" id="filter-product" placeholder="Product" class="filter-input">
                    <select id="filter-channel" class="filter-select">
                        <option value="">All Channels</option>
                        <option value="stable">Stable</option>
                        <option value="beta">Beta</option>
                        <option value="dev">Dev</option>
                    </select>
                    <select id="filter-os" class="filter-select">
                        <option value="">All OS</option>
                        <option value="windows">Windows</option>
                        <option value="linux">Linux</option>
                        <option value="macos">macOS</option>
                    </select>
                    <button class="btn btn-secondary" id="btn-filter">
                        <i class="fas fa-filter"></i> Filter
                    </button>
                    <button class="btn btn-secondary" id="btn-refresh">
                        <i class="fas fa-sync"></i> Refresh
                    </button>
                </div>
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Product</th>
                                <th>Version</th>
                                <th>Channel</th>
                                <th>OS/Arch</th>
                                <th>Published</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="releases-table-body">
                            <tr>
                                <td colspan="7" class="loading">Loading...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Clients Page -->
            <div id="page-clients" class="page">
                <div class="filters">
                    <input type="text" id="filter-client-product" placeholder="Product" class="filter-input">
                    <input type="text" id="filter-client-site" placeholder="Site" class="filter-input">
                    <select id="filter-client-status" class="filter-select">
                        <option value="">All Status</option>
                        <option value="active">Active</option>
                        <option value="inactive">Inactive</option>
                        <option value="error">Error</option>
                    </select>
                    <button class="btn btn-secondary" id="btn-refresh-clients">
                        <i class="fas fa-sync"></i> Refresh
                    </button>
                </div>
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Client ID</th>
                                <th>Product</th>
                                <th>Version</th>
                                <th>OS/Arch</th>
                                <th>Site</th>
                                <th>Last Seen</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody id="clients-table-body">
                            <tr>
                                <td colspan="7" class="loading">Loading...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Backups Page -->
            <div id="page-backups" class="page">
                <div class="filters">
                    <input type="text" id="filter-backup-client" placeholder="Client ID" class="filter-input">
                    <input type="text" id="filter-backup-product" placeholder="Product" class="filter-input">
                    <button class="btn btn-secondary" id="btn-refresh-backups">
                        <i class="fas fa-sync"></i> Refresh
                    </button>
                </div>
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Backup ID</th>
                                <th>Client ID</th>
                                <th>Product</th>
                                <th>Version</th>
                                <th>Size</th>
                                <th>Created</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="backups-table-body">
                            <tr>
                                <td colspan="7" class="loading">Loading...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Events Page -->
            <div id="page-events" class="page">
                <div class="filters">
                    <input type="text" id="filter-event-client" placeholder="Client ID" class="filter-input">
                    <input type="text" id="filter-event-product" placeholder="Product" class="filter-input">
                    <select id="filter-event-type" class="filter-select">
                        <option value="">All Types</option>
                        <option value="check">Check</option>
                        <option value="download">Download</option>
                        <option value="backup_ok">Backup OK</option>
                        <option value="install_ok">Install OK</option>
                        <option value="health_fail">Health Fail</option>
                        <option value="rollback">Rollback</option>
                        <option value="error">Error</option>
                    </select>
                    <button class="btn btn-secondary" id="btn-refresh-events">
                        <i class="fas fa-sync"></i> Refresh
                    </button>
                </div>
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Client ID</th>
                                <th>Type</th>
                                <th>Product</th>
                                <th>Version</th>
                                <th>Timestamp</th>
                            </tr>
                        </thead>
                        <tbody id="events-table-body">
                            <tr>
                                <td colspan="6" class="loading">Loading...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Stats Page -->
            <div id="page-stats" class="page">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon blue">
                            <i class="fas fa-box"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="stat-releases">0</h3>
                            <p>Total Releases</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon green">
                            <i class="fas fa-desktop"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="stat-clients">0</h3>
                            <p>Active Clients</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon orange">
                            <i class="fas fa-database"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="stat-backups">0</h3>
                            <p>Total Backups</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon red">
                            <i class="fas fa-history"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="stat-events">0</h3>
                            <p>Events (24h)</p>
                        </div>
                    </div>
                </div>
                <div class="chart-container">
                    <h3>Recent Activity</h3>
                    <div id="activity-chart" class="chart-placeholder">
                        <p>Chart will be displayed here</p>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modal: New Release -->
    <div id="modal-new-release" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Create New Release</h3>
                <button class="modal-close" data-modal="modal-new-release">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="form-new-release" enctype="multipart/form-data">
                <div class="form-group">
                    <label>Product *</label>
                    <input type="text" name="product" required placeholder="MTVS">
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Version *</label>
                        <input type="text" name="version" required placeholder="1.0.0">
                    </div>
                    <div class="form-group">
                        <label>Channel *</label>
                        <select name="channel" required>
                            <option value="stable">Stable</option>
                            <option value="beta">Beta</option>
                            <option value="dev">Dev</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>OS *</label>
                        <select name="os" required>
                            <option value="windows">Windows</option>
                            <option value="linux">Linux</option>
                            <option value="macos">macOS</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Architecture *</label>
                        <select name="arch" required>
                            <option value="x64">x64</option>
                            <option value="x86">x86</option>
                            <option value="arm64">arm64</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>File *</label>
                    <input type="file" name="file" required accept=".zip,.rar,.7z,.exe,.msi">
                    <small>Max size: 500MB</small>
                </div>
                <div class="form-group">
                    <label>File Password</label>
                    <input type="text" name="filePassword" placeholder="Leave empty if no password">
                </div>
                <div class="form-group">
                    <label>Changelog</label>
                    <textarea name="changelog" rows="4" placeholder="What's new in this version?"></textarea>
                </div>
                <div class="form-group">
                    <label>Min Version</label>
                    <input type="text" name="minVersion" placeholder="Minimum version required">
                </div>
                <div class="form-group">
                    <label>Risk Level</label>
                    <select name="riskLevel">
                        <option value="">None</option>
                        <option value="low">Low</option>
                        <option value="medium">Medium</option>
                        <option value="high">High</option>
                    </select>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" data-modal="modal-new-release">Cancel</button>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-upload"></i> Upload Release
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal: Release Details -->
    <div id="modal-release-details" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Release Details</h3>
                <button class="modal-close" data-modal="modal-release-details">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div id="release-details-content" class="modal-body">
                <!-- Content will be loaded dynamically -->
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div id="toast-container"></div>

    <script src="/js/app.js"></script>
</body>
</html>

